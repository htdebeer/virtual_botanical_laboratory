{"version":3,"file":"virtual_botanical_laboratory.js","sources":["../src/lsystem/LexicalError.js","../src/lsystem/ParseError.js","../src/lsystem/ModuleTree.js","../src/lsystem/Production.js","../src/lsystem/Successor.js","../src/lsystem/Module.js","../src/lsystem/Predecessor.js","../src/lsystem/Expression.js","../src/lsystem/ModuleValue.js","../src/lsystem/ModuleApplication.js","../src/lsystem/NumericalExpression.js","../src/lsystem/IdentityProduction.js","../src/lsystem/Token.js","../src/lsystem/Lexer.js","../src/lsystem/ModuleDefinition.js","../src/lsystem/Alphabet.js","../src/lsystem/StochasticProduction.js","../src/lsystem/BooleanExpression.js","../src/lsystem/Parser.js","../src/lsystem/LSystem.js","../src/interpretation/Command.js","../src/interpretation/Interpretation.js","../src/interpretation/TurtleInterpretation.js","../src/interpretation/CanvasTurtleInterpretation.js","../src/Lab.js","../src/view/style.js","../src/view/about.js","../src/view/help.js","../src/export_html_template.js","../src/empty_configuration.js","../src/view/Action.js","../src/view/Spacer.js","../src/view/View.js","../src/view/RenderView.js","../src/view/DocumentView.js","../src/view/LSystemView.js","../src/view/PropertyEditor.js","../src/view/InterpretationView.js","../src/LabView.js","../src/lab.js"],"sourcesContent":["/*\n * Copyright 2017 Huub de Beer <huub@heerdebeer.org>\n *\n * This file is part of virtual_botanical_laboratory.\n *\n * virtual_botanical_laboratory is free software: you can redistribute it\n * and/or modify it under the terms of the GNU General Public License as\n * published by the Free Software Foundation, either version 3 of the License,\n * or (at your option) any later version.\n *\n * virtual_botanical_laboratory is distributed in the hope that it will be\n * useful, but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General\n * Public License for more details.\n *\n * You should have received a copy of the GNU General Public License along\n * with virtual_botanical_laboratory.  If not, see\n * <http://www.gnu.org/licenses/>.\n * \n */\n/**\n * An error during the lexical analysis phase while parsing an LSystem input\n * string.\n */\nclass LexicalError extends Error {\n}\n\nexport {\n    LexicalError\n};\n","/*\n * Copyright 2017 Huub de Beer <huub@heerdebeer.org>\n *\n * This file is part of virtual_botanical_laboratory.\n *\n * virtual_botanical_laboratory is free software: you can redistribute it\n * and/or modify it under the terms of the GNU General Public License as\n * published by the Free Software Foundation, either version 3 of the License,\n * or (at your option) any later version.\n *\n * virtual_botanical_laboratory is distributed in the hope that it will be\n * useful, but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General\n * Public License for more details.\n *\n * You should have received a copy of the GNU General Public License along\n * with virtual_botanical_laboratory.  If not, see\n * <http://www.gnu.org/licenses/>.\n * \n */\n/**\n * A Error encountered while parsing a LSystem input string.\n */\nclass ParseError extends Error {\n}\n\nexport {\n    ParseError\n};\n","/*\n * Copyright 2017 Huub de Beer <huub@heerdebeer.org>\n *\n * This file is part of virtual_botanical_laboratory.\n *\n * virtual_botanical_laboratory is free software: you can redistribute it\n * and/or modify it under the terms of the GNU General Public License as\n * published by the Free Software Foundation, either version 3 of the License,\n * or (at your option) any later version.\n *\n * virtual_botanical_laboratory is distributed in the hope that it will be\n * useful, but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General\n * Public License for more details.\n *\n * You should have received a copy of the GNU General Public License along\n * with virtual_botanical_laboratory.  If not, see\n * <http://www.gnu.org/licenses/>.\n * \n */\n\nconst stringifyModuleTree = function (tree) {\n    const converted = [];\n    for (const node of tree) {\n        if (node instanceof ModuleTree) {\n            converted.push(\"[\");\n            converted.push(stringifyModuleTree(node));\n            converted.push(\"]\");\n        } else {\n            converted.push(node.stringify());\n        }\n    }\n    return converted.join(\" \");\n};\n\nconst flatten = function (moduleTree) {\n    let modules = [];\n    for (const item of moduleTree) {\n        if (item instanceof ModuleTree) {\n            modules = modules.concat(flatten(item));\n        } else {\n            modules.push(item);\n        }\n    }\n    return modules;\n};\n\n/**\n * A ModuleTree.\n */\nclass ModuleTree extends Array {\n    /**\n     * Create a new ModuleTree instance with an initial list of nodes, if any.\n     *\n     * @param {Module|ModuleTree} [nodes = []] - an initial list of nodes for\n     * this new ModuleTree\n     */\n    constructor(nodes = []) {\n        super();\n        for (const node of nodes) {\n            this.push(node);\n        }\n    }\n\n    /**\n     * Iterator yielding each module in this ModuleTree, via a breadth first\n     * strategy for sub ModuleTrees.\n     *\n     * @yield {Module}\n     */\n    * eachModule() {\n        for (const module of flatten(this)) {\n            yield module;\n        }\n    }\n\n    /**\n     * Create a String representation of this ModuleTree.\n     *\n     * @return {String}\n     */\n    stringify() {\n        return stringifyModuleTree(this);\n    }\n}\n\nexport {\n    ModuleTree\n};\n","/*\n * Copyright 2017 Huub de Beer <huub@heerdebeer.org>\n *\n * This file is part of virtual_botanical_laboratory.\n *\n * virtual_botanical_laboratory is free software: you can redistribute it\n * and/or modify it under the terms of the GNU General Public License as\n * published by the Free Software Foundation, either version 3 of the License,\n * or (at your option) any later version.\n *\n * virtual_botanical_laboratory is distributed in the hope that it will be\n * useful, but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General\n * Public License for more details.\n *\n * You should have received a copy of the GNU General Public License along\n * with virtual_botanical_laboratory.  If not, see\n * <http://www.gnu.org/licenses/>.\n * \n */\nconst _predecessor = new WeakMap();\nconst _successor = new WeakMap();\nconst _condition = new WeakMap();\n\nconst determineParameters = function (production, edge, globalContext = {}) {\n    const formalParameters = production.predecessor.module.parameters.reduce((ps, p) => {\n        return ps.concat([p]);\n    }, []);\n\n    const parameters = Object.assign({}, globalContext);\n\n    formalParameters.forEach((name) => {\n        const actualValue = edge.getValue(name);\n        if (undefined !== actualValue) {\n            parameters[name] = actualValue;\n        }\n    });\n\n    return parameters;\n};\n\nconst conditionHolds = function (production, edge) {\n    if (!production.isConditional()) {\n        // No condition always holds\n        return true;\n    }\n\n    return production.condition.evaluate(determineParameters(production, edge));\n};\n\n/**\n * A Production is a rewriting rule from a predecessor to a successor.\n *\n * @property {Predecessor} predecessor\n * @property {BooleanExpression} [condition = undefined] - productions in a\n * parameterized LSystem can have a condition guarding a production.\n * @property {Successor} successor\n */\nclass Production {\n    /**\n     * Create a new Production instance based on the predecessor, an optional\n     * condition and a successor.\n     *\n     * @param {Predecessor} predecessor\n     * @param {Successor} successor\n     * @param {BooleanExpression} [condition = undefined]\n     */\n    constructor(predecessor, successor, condition = undefined) {\n        _predecessor.set(this, predecessor);\n        _successor.set(this, successor);\n        _condition.set(this, condition);\n    }\n\n    get predecessor() {\n        return _predecessor.get(this);\n    }\n\n    get successor() {\n        return _successor.get(this);\n    }\n\n    get condition() {\n        return _condition.get(this);\n    }\n\n    /**\n     * Is this production conditional?\n     *\n     * @return {Boolean} True if this production has a condition.\n     */\n    isConditional() {\n        return undefined !== this.condition;\n    }\n\n    /**\n     * Does this production match the edge?\n     *\n     * @param {Module} edge - the edge to match against this production\n     * @param {ModuleTree} moduleTree - the moduleTree that is being expected\n     * @param {Number} edgeIndex - the index of edge in the moduleTree\n     * @param {Module[]} [ignore = []] - a list of modules to ignore when\n     * looking at the context\n     *\n     * @returns {Boolean} True if this production matches the edge\n     */\n    matches(edge, moduleTree, pathTaken, edgeIndex, ignore = []) {\n        if (this.isConditional() && !conditionHolds(this, edge)) {\n            return false;\n        }\n        return this.predecessor.matches(edge, moduleTree, pathTaken, edgeIndex, ignore);\n    }\n\n    /**\n     * Follow this productions\n     *\n     * @param {Module} edge - the actual module to apply this production to.\n     * @param {Object} [globalContext = {}] - the globalContext in which this\n     * edge is followed.\n     *\n     * @returns {Successor} The successor of this Production with parameters\n     * applied.\n     */\n    follow(edge, globalContext = {}) {\n        if (this.predecessor.module.isParameterized()) {\n            // In each production, the predecessor is exactly one module. However,\n            // its successor can consist of one or more modules. Construct a map\n            // of formal parameters to their current actual value (based on the\n            // edge)\n            return this.successor.apply(determineParameters(this, edge, globalContext));\n        } else {\n            return this.successor.apply();\n        }\n    }\n\n    /**\n     * Create a String representation of this Production.\n     *\n     * @return {String}\n     */\n    stringify() {\n        let str = this.predecessor.stringify();\n        if (this.isConditional()) {\n            str += `: ${this.condition.stringify()}`;\n        }\n        str += ` -> ${this.successor.stringify()}`;\n        return str;\n    }\n}\n\nexport {\n    Production\n};\n","/*\n * Copyright 2017 Huub de Beer <huub@heerdebeer.org>\n *\n * This file is part of virtual_botanical_laboratory.\n *\n * virtual_botanical_laboratory is free software: you can redistribute it\n * and/or modify it under the terms of the GNU General Public License as\n * published by the Free Software Foundation, either version 3 of the License,\n * or (at your option) any later version.\n *\n * virtual_botanical_laboratory is distributed in the hope that it will be\n * useful, but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General\n * Public License for more details.\n *\n * You should have received a copy of the GNU General Public License along\n * with virtual_botanical_laboratory.  If not, see\n * <http://www.gnu.org/licenses/>.\n * \n */\nimport {ModuleTree} from \"./ModuleTree.js\";\n\nconst applyParametersToModuleTree = function (moduleTree, parameters = {}) {\n    const successor = new ModuleTree();\n    for (const module of moduleTree) {\n        if (module instanceof ModuleTree) {\n            successor.push(applyParametersToModuleTree(module, parameters));\n        } else {\n            successor.push(module.apply(parameters));\n        }\n    }\n    return successor;\n};\n\n/**\n * A successor in a production.\n */\nclass Successor extends ModuleTree {\n    /**\n     * Apply parameters to this successor.\n     * \n     * @param {Object[]} [parameters = {}] - the parameters to apply.\n     *\n     * @returns {Successor} This Successor with parameters applied, if any.\n     */\n    apply(parameters = {}) {\n        return applyParametersToModuleTree(this, parameters);\n    }\n}\n\nexport {\n    Successor\n\n};\n","/*\n * Copyright 2017 Huub de Beer <huub@heerdebeer.org>\n *\n * This file is part of virtual_botanical_laboratory.\n *\n * virtual_botanical_laboratory is free software: you can redistribute it\n * and/or modify it under the terms of the GNU General Public License as\n * published by the Free Software Foundation, either version 3 of the License,\n * or (at your option) any later version.\n *\n * virtual_botanical_laboratory is distributed in the hope that it will be\n * useful, but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General\n * Public License for more details.\n *\n * You should have received a copy of the GNU General Public License along\n * with virtual_botanical_laboratory.  If not, see\n * <http://www.gnu.org/licenses/>.\n * \n */\n// A Module's private properties\nconst _name = new WeakMap();\nconst _parameters = new WeakMap();\n\n/**\n * A Module represents a symbol in a LSystem.\n *\n * @property {String} name - the name of the module.\n * @property {Object[]} parameters - the parameters of this module.\n */\nclass Module {\n\n    /**\n     * Create a new Module\n     *\n     * @param {String} name - the module's name\n     * @param {Object[]} [parameters = []] - the module's parameters, if any\n     */\n    constructor(name, parameters = []) {\n        _name.set(this, name);\n        _parameters.set(this, parameters);\n    }\n\n    get name() {\n        return _name.get(this);\n    }\n\n    get parameters() {\n        return _parameters.get(this);\n    }\n\n    /**\n     * Is this Module equal to another module?\n     *\n     * @param {Module} other - the other module to compare this module with\n     * @return {Boolean} True if the names are the same as well as their\n     * number of parameters.\n     */\n    equals(other) {\n        // console.log(`${this.name} === ${other.name} and ${this.parameters.length} === ${other.parameters.length}`);\n        return this.name === other.name && this.parameters.length === other.parameters.length;\n    }\n\n    /**\n     * Is this Module parameterized?\n     *\n     * @returns {Boolean} true if it has parameters.\n     */\n    isParameterized() {\n        return 0 < this.parameters.length;\n    }\n\n    /**\n     * Create a String representation of this Module.\n     *\n     * @returns {String}\n     */\n    stringify() {\n        if (this.isParameterized()) {\n            return `${this.name}(${this.parameters.map((p) => p.stringify()).join(\",\")})`;\n        } else {\n            return this.name;\n        }\n    }\n}\n\nexport {\n    Module\n};\n","/*\n * Copyright 2017 Huub de Beer <huub@heerdebeer.org>\n *\n * This file is part of virtual_botanical_laboratory.\n *\n * virtual_botanical_laboratory is free software: you can redistribute it\n * and/or modify it under the terms of the GNU General Public License as\n * published by the Free Software Foundation, either version 3 of the License,\n * or (at your option) any later version.\n *\n * virtual_botanical_laboratory is distributed in the hope that it will be\n * useful, but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General\n * Public License for more details.\n *\n * You should have received a copy of the GNU General Public License along\n * with virtual_botanical_laboratory.  If not, see\n * <http://www.gnu.org/licenses/>.\n * \n */\nimport {ModuleTree} from \"./ModuleTree.js\";\nimport {Module} from \"./Module.js\";\n\nconst _module = new WeakMap();\nconst _leftContext = new WeakMap();\nconst _rightContext = new WeakMap();\n\nconst edgeMatches = function (predecessor, edge) {\n    return predecessor.module.equals(edge);\n};\n\nconst leftContextMatches = function (leftContext, pathTaken) {\n    let match = false;\n    if (pathTaken.length >= leftContext.length) {\n        // leftContext fits in the path\n        match = true;\n        let reverseIndex = 1;\n        while (match && reverseIndex <= leftContext.length) {\n            const actual = pathTaken[pathTaken.length - reverseIndex];\n            const formal = leftContext[leftContext.length - reverseIndex];\n\n            match = match && actual.equals(formal);\n            reverseIndex++;\n        }\n    }\n    return match;\n};\n\nconst rightContextMatches = function (rightContext, rightContextIndex, moduleTree, moduleTreeIndex, ignore = []) {\n    let match = true;\n\n    while (match && rightContextIndex < rightContext.length) {\n        if (moduleTreeIndex >= moduleTree.length) {\n            return false;\n        }\n\n        const actual = moduleTree[moduleTreeIndex];\n        const formal = rightContext[rightContextIndex];\n   \n        if (formal instanceof ModuleTree) {\n            match = match && \n                actual instanceof ModuleTree &&\n                rightContextMatches(formal, 0, actual, 0, ignore);\n            rightContextIndex++;\n        } else {\n            if (actual instanceof Module) {\n                const ignored = ignore.filter(m => m.equals(actual));\n                if (0 >= ignored.length) {\n                    match = match && actual.equals(formal); \n                    rightContextIndex++;\n                }\n            } else {\n                // See if the subtree is a match. If it isn't, ignore it and\n                // continue at the current level. If it is a match, the rest\n                // of the rightContext has been matched, so this is a match.\n                if (rightContextMatches(rightContext, rightContextIndex, actual, 0, ignore)) {\n                    return true;\n                }\n            }\n        }\n        moduleTreeIndex++;\n    }\n\n    return match;\n};\n\n/**\n * A Predecessor in a Production.\n *\n * @param {Module} module\n * @param {ModuleTree} [leftContext = undefined] - an optional left context\n * for context sensitive productions.\n * @param {ModuleTree} [rightContext = undefined] - an optional right context\n * for context sensitive productions.\n */\nclass Predecessor {\n    /**\n     * Create a new instance of Predecessor\n     *\n     * @param {Module} module - the module this predecessor is about.\n     */\n    constructor(module) {\n        _module.set(this, module);\n        _leftContext.set(this, undefined);\n        _rightContext.set(this, undefined);\n    }\n\n    get module() {\n        return _module.get(this);\n    }\n\n    set leftContext(context) {\n        _leftContext.set(this, context);\n    }\n\n    get leftContext() {\n        return _leftContext.get(this);\n    }\n\n    /**\n     * Has this predecessor a left context?\n     *\n     * @returns {Boolean}\n     */\n    hasLeftContext() {\n        return undefined !== this.leftContext;\n    }\n\n    set rightContext(context) {\n        _rightContext.set(this, context);\n    }\n\n    get rightContext() {\n        return _rightContext.get(this);\n    }\n\n    /**\n     * Has this predecessor a right context?\n     *\n     * @returns {Boolean}\n     */\n    hasRightContext() {\n        return undefined !== this.rightContext;\n    }\n\n    /**\n     * Is this a context sensitive predecessor?\n     *\n     * @returns {Boolean} True if this predecessor has a left context, a right\n     * context, or both contexts.\n     */\n    isContextSensitive() {\n        return this.hasLeftContext() || this.hasRightContext();\n    }\n\n    /**\n     * Is this a context free predecessor?\n     *\n     * @returns {Boolean} True if this precessor does not care about the\n     * context.\n     */\n    isContextFree() {\n        return !this.isContextSensitive();\n    }\n\n    /**\n     * Does this predecessor match a given module?\n     *\n     * @param {Module} edge - the module to match against this predecessor.\n     * @param {ModuleTree} moduleTree - the sub tree in the predecessor the\n     * module is part of\n     * @param {Module[]} [pathTaken = []] - the path taken to reach module,\n     * this is the left context\n     * @param {Integer} [edgeIndex = 0] - the index of module in moduleTree.\n     * This is used to determine the right context.\n     * @param {Module[]} [ignore = []] - a list with modules to ignore when\n     * determining the right context.\n     *\n     * @returns{Boolean} True if the module matches agains this predecessor,\n     * i.e, they are equal and the context matches.\n     */\n    matches(edge, moduleTree, pathTaken, edgeIndex, ignore = []) {\n        let left = true;\n        let right = true;\n        \n        if (this.hasLeftContext()) {\n            left =  leftContextMatches(this.leftContext, pathTaken);\n        }\n\n        if (this.hasRightContext()) {\n            right = rightContextMatches(this.rightContext, 0, moduleTree, edgeIndex + 1, ignore);\n        }\n\n        return left && edgeMatches(this, edge) && right;\n    }\n\n    /**\n     * Create a String representation of this Predecessor.\n     *\n     * @returns {String}\n     */\n    stringify() {\n        let str = \"\";\n        if (this.hasLeftContext()) {\n            str += `${this.leftContext.stringify()} < `;\n        }\n        str += this.module.stringify();\n        if (this.hasRightContext()) {\n            str += ` > ${this.rightContext.stringify()}`;\n        }\n        return str;\n    }\n\n}\n\nexport {\n    Predecessor\n};\n","/*\n * Copyright 2017 Huub de Beer <huub@heerdebeer.org>\n *\n * This file is part of virtual_botanical_laboratory.\n *\n * virtual_botanical_laboratory is free software: you can redistribute it\n * and/or modify it under the terms of the GNU General Public License as\n * published by the Free Software Foundation, either version 3 of the License,\n * or (at your option) any later version.\n *\n * virtual_botanical_laboratory is distributed in the hope that it will be\n * useful, but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General\n * Public License for more details.\n *\n * You should have received a copy of the GNU General Public License along\n * with virtual_botanical_laboratory.  If not, see\n * <http://www.gnu.org/licenses/>.\n * \n */\nconst _formalParameters = new WeakMap();\nconst _expression = new WeakMap();\nconst _evaluator = new WeakMap();\n\n/**\n * An Expression can be evaluated to yield a value.\n *\n * @property {String} expression - a textual representation of this expression\n * @property {String[]} formalParameters - a list of formal parameter names\n */\nclass Expression {\n\n    /**\n     * Create a new instance of an Expression.\n     *\n     * @param {String[]} [formalParameters = []] - an optional list of formal\n     * parameter names.\n     * @param {Boolean|Number|undefined} [expression = undefined] - an optional expression\n     * value, defaults to undefined.\n     */\n    constructor(formalParameters = [], expression = undefined) {\n        _formalParameters.set(this, formalParameters);\n        _expression.set(this, expression);\n        _evaluator.set(this, new Function(...formalParameters, `return ${expression}`));\n    }\n\n    get formalParameters() {\n        return _formalParameters.get(this);\n    }\n\n    get expression() {\n        return _expression.get(this);\n    }\n\n    /**\n     * Evaluate this Expression given an optional list of actual parameters.\n     *\n     * @param {Number[]|Boolean[]} [parameters = {}] - an optional map\n     * of actual parameters to apply to this Expression before evaluating the\n     * Expression.\n     *\n     * @return {Number|Boolean|undefined} the result of the evaluating this\n     * Expression.\n     */\n    evaluate(parameters = {}) {\n        const actualParameters = this.formalParameters.map((p) => parameters[p]);\n        return _evaluator.get(this).apply(undefined, actualParameters);\n    }\n\n    /**\n     * Create a String representation of this Expression.\n     *\n     * @returns {String}\n     */\n    stringify() {\n        return this.expression;\n    }\n}\n\nexport {\n    Expression\n};\n","/*\n * Copyright 2017 Huub de Beer <huub@heerdebeer.org>\n *\n * This file is part of virtual_botanical_laboratory.\n *\n * virtual_botanical_laboratory is free software: you can redistribute it\n * and/or modify it under the terms of the GNU General Public License as\n * published by the Free Software Foundation, either version 3 of the License,\n * or (at your option) any later version.\n *\n * virtual_botanical_laboratory is distributed in the hope that it will be\n * useful, but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General\n * Public License for more details.\n *\n * You should have received a copy of the GNU General Public License along\n * with virtual_botanical_laboratory.  If not, see\n * <http://www.gnu.org/licenses/>.\n * \n */\nimport {Expression} from \"./Expression.js\";\nimport {Module} from \"./Module.js\";\n\nconst _values = new WeakMap();\n\n/**\n * A ModuleValue defines an actual module in a string.\n *\n * @property {Number[]} values\n */\nclass ModuleValue extends Module {\n\n    constructor(name, moduleDefinition, actualParameters) {\n        const formalParameters = moduleDefinition.parameters;\n\n        if (formalParameters.length !== actualParameters.length) {\n            throw new Error(`Number of actual parameters (${actualParameters.length}) should be equal to the number of formal parameters (${formalParameters.length}).`);\n        }\n\n        super(name, formalParameters);\n\n        const values = {};\n\n        for (let index = 0; index < formalParameters.length; index++) {\n            const name = formalParameters[index];\n            const value = actualParameters[index];\n            values[name] = value instanceof Expression ? value.evaluate() : value;\n        }\n\n        _values.set(this, values);\n    }\n\n    get values() {\n        return _values.get(this);\n    }\n\n    /**\n     * Get the value of a parameter.\n     *\n     * @param {String} name - the name of the parameter to get\n     * @return {Number} the value of this parameter, or undefined if it does\n     * not exist.\n     */\n    getValue(name) {\n        return _values.get(this)[name];\n    }\n\n    /**\n     * Create a String representation of this Module.\n     *\n     * @returns {String}\n     */\n    stringify() {\n        if (this.isParameterized()) {\n            return `${this.name}(${Object.values(_values.get(this)).join(\",\")})`;\n        } else {\n            return this.name;\n        }\n    }\n}\n\nexport {\n    ModuleValue\n};\n","/*\n * Copyright 2017 Huub de Beer <huub@heerdebeer.org>\n *\n * This file is part of virtual_botanical_laboratory.\n *\n * virtual_botanical_laboratory is free software: you can redistribute it\n * and/or modify it under the terms of the GNU General Public License as\n * published by the Free Software Foundation, either version 3 of the License,\n * or (at your option) any later version.\n *\n * virtual_botanical_laboratory is distributed in the hope that it will be\n * useful, but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General\n * Public License for more details.\n *\n * You should have received a copy of the GNU General Public License along\n * with virtual_botanical_laboratory.  If not, see\n * <http://www.gnu.org/licenses/>.\n * \n */\nimport {Module} from \"./Module.js\";\nimport {ModuleValue} from \"./ModuleValue.js\";\n\nconst _expressions = new WeakMap();\n\n/**\n * A ModuleApplication defines a module in a successor of a production\n */\nclass ModuleApplication extends Module {\n\n    /**\n     * Create a new ModuleApplication\n     *\n     * @param {String} name\n     * @param {ModuleDefinition} moduleDefinition\n     * @param {Object[]} actualParameters\n     */\n    constructor(name, moduleDefinition, actualParameters) {\n        const formalParameters = moduleDefinition.parameters;\n\n        if (formalParameters.length !== actualParameters.length) {\n            throw new Error(`Number of actual parameters (${actualParameters.lenght}) should be equal to the number of formal parameters (${formalParameters.length}).`);\n        }\n\n        super(name, formalParameters);\n\n        const expressions = {};\n\n        for (let index = 0; index < formalParameters.length; index++) {\n            const name = formalParameters[index];\n            expressions[name] = actualParameters[index];\n        }\n\n        _expressions.set(this, expressions);\n    }\n\n    /**\n     * Get the value of a parameter.\n     *\n     * @param {String} name - the name of the parameter to get\n     * @return {Number} the value of this parameter, or undefined if it does\n     * not exist.\n     */\n    getExpression(name) {\n        return _expressions.get(this)[name];\n    }\n\n    apply(parameters) {\n        const values = this.parameters\n            .reduce(\n                (values, name) => {\n                    values.push(this.getExpression(name).evaluate(parameters));\n                    return values;\n                }, []\n            );\n        return new ModuleValue(this.name, this, values);\n    }\n\n    /**\n     * Create a String representation of this Module.\n     *\n     * @returns {String}\n     */\n    stringify() {\n        if (this.isParameterized()) {\n            return `${this.name}(${Object.values(_expressions.get(this)).map(e => e.stringify()).join(\",\")})`;\n        } else {\n            return this.name;\n        }\n    }\n}\n\nexport {\n    ModuleApplication\n};\n","/*\n * Copyright 2017 Huub de Beer <huub@heerdebeer.org>\n *\n * This file is part of virtual_botanical_laboratory.\n *\n * virtual_botanical_laboratory is free software: you can redistribute it\n * and/or modify it under the terms of the GNU General Public License as\n * published by the Free Software Foundation, either version 3 of the License,\n * or (at your option) any later version.\n *\n * virtual_botanical_laboratory is distributed in the hope that it will be\n * useful, but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General\n * Public License for more details.\n *\n * You should have received a copy of the GNU General Public License along\n * with virtual_botanical_laboratory.  If not, see\n * <http://www.gnu.org/licenses/>.\n * \n */\nimport {Expression} from \"./Expression.js\";\n\n/**\n * A NumericalExpression, which yields a Number value when evaluated\n */\nclass NumericalExpression extends Expression {\n    /**\n     * Create a new NumericalExpression instance.\n     *\n     * @param {String[]} [formalParameter = []] - an optional list of formal\n     * parameter names used in this NumericalExpression.\n     * @param {Number} [expression = NaN] - an optional default value.\n     */\n    constructor(formalParameters = [], expression = NaN) {\n        super(formalParameters, expression);\n    }\n\n    /**\n     * Create a String representation of this NumericalExpression.\n     *\n     * @returns {String}\n     */\n    stringify() {\n        return super\n            .stringify()\n            .replace(/\\*\\*/g, \" ^ \");\n    }\n\n}\n\nexport {\n    NumericalExpression\n};\n","/*\n * Copyright 2017 Huub de Beer <huub@heerdebeer.org>\n *\n * This file is part of virtual_botanical_laboratory.\n *\n * virtual_botanical_laboratory is free software: you can redistribute it\n * and/or modify it under the terms of the GNU General Public License as\n * published by the Free Software Foundation, either version 3 of the License,\n * or (at your option) any later version.\n *\n * virtual_botanical_laboratory is distributed in the hope that it will be\n * useful, but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General\n * Public License for more details.\n *\n * You should have received a copy of the GNU General Public License along\n * with virtual_botanical_laboratory.  If not, see\n * <http://www.gnu.org/licenses/>.\n * \n */\nimport {Production} from \"./Production.js\";\nimport {Successor} from \"./Successor.js\";\nimport {Predecessor} from \"./Predecessor.js\";\nimport {ModuleApplication} from \"./ModuleApplication.js\";\nimport {NumericalExpression} from \"./NumericalExpression.js\";\n\n/**\n * An IdentityProduction is a Production that maps a Module to itself. This is\n * used in an LSystem for all Modules in an Alphabet that do not have a\n * Production of their own. This allows to use more succinct LSystem\n * definitions.\n */\nclass IdentityProduction extends Production {\n    /**\n     * Create a new IdentityProduction instance.\n     *\n     * @param {Module} module - the module for which to create the\n     * IdentityProduction.\n     */\n    constructor(module) {\n        const expressions = [];\n        if (module.isParameterized()) {\n            for (const name of module.parameters) {\n                expressions.push(new NumericalExpression([name], name));\n            }\n        }\n        const moduleApplication = new ModuleApplication(module.name, module, expressions);\n\n        super(new Predecessor(moduleApplication), new Successor([moduleApplication]));\n    }\n}\n\nexport {\n    IdentityProduction\n};\n","/*\n * Copyright 2017 Huub de Beer <huub@heerdebeer.org>\n *\n * This file is part of virtual_botanical_laboratory.\n *\n * virtual_botanical_laboratory is free software: you can redistribute it\n * and/or modify it under the terms of the GNU General Public License as\n * published by the Free Software Foundation, either version 3 of the License,\n * or (at your option) any later version.\n *\n * virtual_botanical_laboratory is distributed in the hope that it will be\n * useful, but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General\n * Public License for more details.\n *\n * You should have received a copy of the GNU General Public License along\n * with virtual_botanical_laboratory.  If not, see\n * <http://www.gnu.org/licenses/>.\n * \n */\n// Token's private members\nconst _name = new WeakMap();\nconst _lexeme = new WeakMap();\nconst _value = new WeakMap();\nconst _column = new WeakMap();\nconst _line = new WeakMap();\nconst _lexemeBegin = new WeakMap();\n\n/**\n * A token recognized during the lexical analysis of a LSystem input string\n * and used to parse that input string.\n *\n * @property {Symbol} name - this Token's type name, such as IDENTIFIER or\n * OPERATOR\n * @property {String} lexeme - this Token's lexeme\n * @property {String|Number|undefined} value - this Token's value as\n * recognized from the lexeme\n * @property {Number} line - the line number this Token was found at in the\n * input string\n * @property {Number} column - the column on the line this Token was found at\n * @property {Number} lexemeBegin - the index of the first character of this\n * Token's lexeme in the input string\n */\nclass Token {\n    /**\n     * Create a new Token.\n     *\n     * @param {Symbol} name - the name of the token type, such as IDENTIFIER or\n     *   OPERATOR\n     * @param {String} lexeme - the string that is recognized as this token\n     * @param {String|Number|undefined} value - the value represented by the\n     *   lexeme\n     * @param {Number} line - the line in the input string this token was\n     *   recognized\n     * @param {Number} column - the column in the line in the input string this\n     *   token was recognized\n     * @param {Number} lexemeBegin - the index of the first character of the\n     *   lexeme in the input string\n     */\n    constructor(name, lexeme, value, line, column, lexemeBegin) {\n        _name.set(this, name);\n        _lexeme.set(this, lexeme);\n        _value.set(this, value);\n        _line.set(this, line);\n        _column.set(this, column);\n        _lexemeBegin.set(this, lexemeBegin);\n    }\n\n    get name() {\n        return _name.get(this);\n    }\n    \n    get lexeme() {\n        return _lexeme.get(this);\n    }\n\n    get value() {\n        return _value.get(this);\n    }\n\n    get line() {\n        return _line.get(this);\n    }\n\n    get column() {\n        return _column.get(this);\n    }\n\n    get lexemeBegin() {\n        return _lexemeBegin.get(this);\n    }\n\n    /**\n     * Get the position of this Token in the input source in the format (line,\n     * column).\n     *\n     * @returns {String}\n     */\n    position() {\n        return `(${this.line}, ${this.column})`;\n    }\n}\n\nexport {\n    Token\n};\n","/*\n * Copyright 2017 Huub de Beer <huub@heerdebeer.org>\n *\n * This file is part of virtual_botanical_laboratory.\n *\n * virtual_botanical_laboratory is free software: you can redistribute it\n * and/or modify it under the terms of the GNU General Public License as\n * published by the Free Software Foundation, either version 3 of the License,\n * or (at your option) any later version.\n *\n * virtual_botanical_laboratory is distributed in the hope that it will be\n * useful, but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General\n * Public License for more details.\n *\n * You should have received a copy of the GNU General Public License along\n * with virtual_botanical_laboratory.  If not, see\n * <http://www.gnu.org/licenses/>.\n * \n */\nimport {LexicalError} from \"./LexicalError.js\";\nimport {Token} from \"./Token.js\";\nimport {CONTEXT, MODULE_NAME} from \"./Parser.js\";\n\n// Token names\n\nconst NUMBER = Symbol(\"NUMBER\");\nconst IDENTIFIER = Symbol(\"IDENTIFIER\");\nconst BRACKET_OPEN = Symbol(\"BRACKET_OPEN\");\nconst BRACKET_CLOSE = Symbol(\"BRACKET_CLOSE\");\nconst OPERATOR = Symbol(\"OPERATOR\");\nconst DELIMITER = Symbol(\"DELIMITER\");\nconst KEYWORD = Symbol(\"KEYWORD\");\nconst STRING = Symbol(\"STRING\");\n\n// Private data and functions for lexer\n\nconst _input = new WeakMap();\nconst _lexemeBegin = new WeakMap();\nconst _forward = new WeakMap();\nconst _line = new WeakMap();\nconst _column = new WeakMap();\n\nconst _context = new WeakMap();\n\n// Manipulate state of DFA\n\nconst reset = function (lexer, input) {\n    _input.set(lexer, input);\n    _lexemeBegin.set(lexer, 0);\n    _forward.set(lexer, -1);\n    _line.set(lexer, 0);\n    _column.set(lexer, 0);\n    _context.set(lexer, undefined);\n};\n\nconst saveState = function (lexer) {\n    return {\n        lexemeBegin: _lexemeBegin.get(lexer),\n        forward: _forward.get(lexer),\n        line: _line.get(lexer),\n        column: _column.get(lexer)\n    };\n};\n\nconst restoreState = function (lexer, state) {\n    _lexemeBegin.set(lexer, state.lexemeBegin);\n    _forward.set(lexer, state.forward);\n    _line.set(lexer, state.line);\n    _column.set(lexer, state.column);\n};\n\nconst setContext = function (lexer, newContext = undefined) {\n    _context.set(lexer, newContext);\n};\n\nconst isContext = function (lexer, context) {\n    return _context.get(lexer) === context;\n};\n\nconst line = function (lexer) {\n    return _line.get(lexer);\n};\n\nconst column = function (lexer) {\n    return _column.get(lexer);\n};\n\nconst peek = function (lexer, distance = 1) {\n    const forward = _forward.get(lexer);\n    if (forward + distance < _input.get(lexer).length) {\n        return _input.get(lexer)[forward + distance];\n    }\n};\n\nconst moveForward = function (lexer, skip = false) {\n    const c = peek(lexer);\n    if (c) {\n        _forward.set(lexer, _forward.get(lexer) + 1);\n        if (\"\\n\" === c) {\n            _line.set(lexer, line(lexer) + 1);\n            _column.set(lexer, 0);\n        } else {\n            _column.set(lexer, column(lexer) + 1);\n        }\n\n        if (skip) {\n            _lexemeBegin.set(lexer, _lexemeBegin.get(lexer) + 1);\n        }\n    }\n};\n\nconst lexeme = function (lexer) {\n    const start = _lexemeBegin.get(lexer);\n    const end = _forward.get(lexer);\n    return _input.get(lexer).slice(start, end + 1);\n};\n\nconst recognize  = function (lexer, tokenName, value, l = line(lexer), c = column(lexer) - lexeme(lexer).length) {\n    const token = new Token(\n        tokenName, \n        lexeme(lexer), \n        value, \n        l, \n        c,\n        _lexemeBegin.get(this)\n    );\n\n    _lexemeBegin.set(lexer, _forward.get(lexer) + 1);\n    _forward.set(lexer, _forward.get(lexer));\n\n    return token;\n};\n\nconst position = function (lexer) {\n    return `(${line(lexer)}, ${column(lexer) - (_forward.get(lexer) - _lexemeBegin.get(lexer))})`;\n};\n\n// Recognize patterns\n\nconst isWhitespace = function (c) {\n    return [\" \", \"\\t\", \"\\n\"].includes(c);\n};\n\nconst isCommentStart = function (c) {\n    return \"#\" === c;\n};\n\nconst isDigit = function (c) {\n    return \"0\" <= c && c <= \"9\";\n};\n\nconst isLetter = function (c) {\n    return (\"a\" <= c && c <= \"z\") || (\"A\" <= c && c <= \"Z\");\n};\n\nconst isIdentifierExtra = function (c) {\n    return [\n        \"'\",\n        \"_\"\n    ].includes(c);\n};\n\nconst isKeyword = function (identifier) {\n    return [\n        \"lsystem\",\n        \"alphabet\",\n        \"axiom\",\n        \"productions\",\n        \"ignore\",\n        \"include\",\n        \"and\",\n        \"or\",\n        \"not\",\n        \"true\",\n        \"false\",\n        \"description\"\n    ].includes(identifier);\n};\n\nconst isIdentifierSymbol = function (c) {\n    return [\n        \"+\",\n        \"-\",\n        \"/\",\n        \"*\",\n        \"&\",\n        \"|\",\n        \"$\"\n    ].includes(c);\n};\n\n// Recognize Tokens\n\nconst string = function (lexer, delimiter = \"\\\"\") {\n    if (delimiter === peek(lexer)) {\n        const lineStart = line(lexer);\n        const colStart = column(lexer);\n\n        moveForward(lexer);\n        while (delimiter !== peek(lexer)) {\n            moveForward(lexer);\n        }\n        moveForward(lexer);\n\n        return recognize(\n            lexer, \n            STRING, \n            lexeme(lexer).slice(1, -1), \n            lineStart, \n            colStart\n        );\n    }\n};\n\nconst skipWhitespace = function (lexer) {\n    while (isWhitespace(peek(lexer))) {\n        moveForward(lexer, true);\n    }\n};\n\nconst skipComment = function (lexer) {\n    if (isCommentStart(peek(lexer))) {\n        while (\"\\n\" !== peek(lexer)) {\n            moveForward(lexer, true);\n        }\n    }\n};\n\nconst digits = function (lexer) {\n    while(isDigit(peek(lexer))) {\n        moveForward(lexer);\n    }\n};\n\nconst integer = function (lexer) {\n    if (isDigit(peek(lexer))) {\n        moveForward(lexer);\n        digits(lexer);\n    }\n};\n\nconst number = function (lexer) {\n    if (isDigit(peek(lexer))) {\n        integer(lexer);\n\n        // Decimal part\n        if (\".\" === peek(lexer) && isDigit(peek(lexer, 2))) {\n            moveForward(lexer);\n            digits(lexer);\n        }\n\n        // Exponent part\n        if ([\"e\", \"E\"].includes(peek(lexer))) {\n            moveForward(lexer);\n\n            if ([\"+\", \"-\"].includes(peek(lexer))) {\n                moveForward(lexer);\n            }\n\n            if (!isDigit(peek(lexer))) {\n                throw new LexicalError(`Expected a numerical exponential part at ${position(lexer)}, got \"${peek(lexer)}\" instead.`);\n            }\n\n            digits(lexer);\n        }\n\n        try {\n            const value = parseFloat(lexeme(lexer));\n            return recognize(lexer, NUMBER, value);        \n        } catch (e) {\n            throw new LexicalError(`Unable to parse \"${lexeme(lexer)}\" as a number at ${position(lexer)}.`);\n        }\n    }\n};\n\nconst identifier = function (lexer) {\n    // Modules can have symbols such as '+' or '-' as name as well.\n    if (isContext(lexer, MODULE_NAME) && isIdentifierSymbol(peek(lexer))) {\n        moveForward(lexer);\n        return recognize(lexer, IDENTIFIER, lexeme(lexer));\n    }\n\n    if (isLetter(peek(lexer))) {\n        moveForward(lexer);\n        while (isLetter(peek(lexer)) || isDigit(peek(lexer)) || isIdentifierExtra(peek(lexer))) {\n            moveForward(lexer);\n        }\n\n        const id = lexeme(lexer);\n\n        return isKeyword(id) ? \n            recognize(lexer, KEYWORD, id) : \n            recognize(lexer, IDENTIFIER, id);\n    }\n};\n\n\nconst bracket = function (lexer) {\n    const BRACKET_OPEN_CHARACTERS = [\"(\", \"{\", \"[\"];\n    const BRACKET_CLOSE_CHARACTERS = [\")\", \"}\", \"]\"];\n\n    if (isContext(lexer, CONTEXT)) {\n        BRACKET_OPEN_CHARACTERS.push(\"<\");\n        BRACKET_CLOSE_CHARACTERS.push(\">\");\n    }\n\n    const c = peek(lexer);\n    if (BRACKET_OPEN_CHARACTERS.includes(c)) {\n        moveForward(lexer);\n        return recognize(lexer, BRACKET_OPEN, c);\n    } else if (BRACKET_CLOSE_CHARACTERS.includes(c)) {\n        moveForward(lexer);\n        return recognize(lexer, BRACKET_CLOSE, c);\n    }\n};\n\nconst delimiter = function (lexer) {\n    const c = peek(lexer);\n    if ([\",\", \":\", \";\"].includes(c)) {\n        moveForward(lexer);\n        return recognize(lexer, DELIMITER, c);\n    }\n};\n\nconst operator = function (lexer) {\n    const c = peek(lexer);\n    if ([\"-\", \"+\", \"*\", \"/\", \"^\", \">\", \"<\", \"=\"].includes(c)) {\n        if (\"-\" === c) {\n            moveForward(lexer);\n            if (\">\" === peek(lexer)) {\n                moveForward(lexer);\n            }\n        } else if (\"<\" === c) {\n            moveForward(lexer);\n            if (\"=\" === peek(lexer) || \">\" === peek(lexer)) {\n                moveForward(lexer);\n            }\n        } else if (\">\" === c) {\n            moveForward(lexer);\n            if (\"=\" === peek(lexer)) {\n                moveForward(lexer);\n            }\n        } else {\n            moveForward(lexer);\n        }\n\n        return recognize(lexer, OPERATOR, lexeme(lexer));\n    }\n};\n\n\n/**\n * A Lexer to analyse LSystem input strings lexically.\n */\nclass Lexer {\n\n    /**\n     * Create a new Lexer for an LSystem input string\n     *\n     * @param {String} [input = ''] - the input string the analyse.\n     */\n    constructor(input = \"\") {\n        reset(this, input);\n    }\n\n    /**\n     * Get the next token in the input. The token to regognize can depend on\n     * the context.\n     *\n     * @param {Symbol} [context = undefined] - an optional context to control\n     * the recognition process. For example, symbols like '+' and '-' are\n     * operators in the context of an expression, but are identifiers in the\n     * context of an alphabet.\n     *\n     * @returns {Token|undefined} the recognized token or undefined if no\n     * token could be recognized.\n     */\n    getNextToken(context = undefined) {\n        setContext(this, context);\n        while (peek(this)) {\n            do {\n                skipWhitespace(this);\n                skipComment(this);\n            } while (\n                isWhitespace(peek(this)) || isCommentStart(peek(this))\n            );\n\n            const token =\n                identifier(this) ||\n                number(this) ||\n                bracket(this) ||\n                delimiter(this) ||\n                operator(this) ||\n                string(this)\n            ;\n\n            if (token) {\n                return token;\n            }\n        }\n    }\n\n    /**\n     * Look a distance ahead in the input string, optionally take into account\n     * the context.\n     *\n     * @param {Number} [distance = 1] - the distance to look ahead, defaults to\n     * 1.\n     * @param {Symbol} [context = undefined] - an optional context to control\n     * the recognition process.\n     *\n     * @returns {Token|undefined} the token recognized at distance or\n     * undefined if no token could be recognized at that distance.\n     */\n    lookAhead(distance = 1, context = undefined) {\n        const state = saveState(this);\n        let token = undefined;\n        for (let i = 0; i < distance; i++) {\n            token = this.getNextToken(context);\n        }\n        restoreState(this, state);\n        return token;\n    }\n\n}\n\nexport {\n    Lexer,\n    NUMBER,\n    IDENTIFIER,\n    BRACKET_OPEN,\n    BRACKET_CLOSE,\n    OPERATOR,\n    DELIMITER,\n    STRING,\n    KEYWORD\n};\n","/*\n * Copyright 2017 Huub de Beer <huub@heerdebeer.org>\n *\n * This file is part of virtual_botanical_laboratory.\n *\n * virtual_botanical_laboratory is free software: you can redistribute it\n * and/or modify it under the terms of the GNU General Public License as\n * published by the Free Software Foundation, either version 3 of the License,\n * or (at your option) any later version.\n *\n * virtual_botanical_laboratory is distributed in the hope that it will be\n * useful, but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General\n * Public License for more details.\n *\n * You should have received a copy of the GNU General Public License along\n * with virtual_botanical_laboratory.  If not, see\n * <http://www.gnu.org/licenses/>.\n * \n */\nimport {Module} from \"./Module.js\";\n\n/**\n * A ModuleDefinition defines a module in an alphabet.\n */\nclass ModuleDefinition extends Module {\n\n    /**\n     * Does an actual module matches this Module's definition?\n     *\n     * @param {Module} actualModule - the actual module to check against this\n     * Module definition\n     * @returns {Boolean} True if the number of parameters is the same in\n     * actual and definition.\n     */\n    matchesDefinition(actualModule) {\n        return this.parameters.length === actualModule.parameters.length;\n    }\n\n    /**\n     * Create a String representation of this Module.\n     *\n     * @returns {String}\n     */\n    stringify() {\n        if (this.isParameterized()) {\n            return `${this.name}(${this.parameters.join(\",\")})`;\n        } else {\n            return this.name;\n        }\n    }\n}\n\nexport {\n    ModuleDefinition\n};\n","/*\n * Copyright 2017 Huub de Beer <huub@heerdebeer.org>\n *\n * This file is part of virtual_botanical_laboratory.\n *\n * virtual_botanical_laboratory is free software: you can redistribute it\n * and/or modify it under the terms of the GNU General Public License as\n * published by the Free Software Foundation, either version 3 of the License,\n * or (at your option) any later version.\n *\n * virtual_botanical_laboratory is distributed in the hope that it will be\n * useful, but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General\n * Public License for more details.\n *\n * You should have received a copy of the GNU General Public License along\n * with virtual_botanical_laboratory.  If not, see\n * <http://www.gnu.org/licenses/>.\n * \n */\nconst _moduleDefinitions = new WeakMap();\n\n/**\n * The Alphabet of an LSystem. The modules in an Alphabet are unique.\n *\n * @property {ModuleDefinition[]} moduleDefinitions\n */\nclass Alphabet {\n\n    /**\n     * Create a new instance of Alphabet.\n     *\n     * @param {Module[]} modules - a list of modules. \n     */\n    constructor(modules) {\n        _moduleDefinitions.set(this, []);\n        for (const module of modules) {\n            this.add(module);\n        }\n    }\n\n    get moduleDefinitions() {\n        return _moduleDefinitions.get(this);\n    }\n\n    /**\n     * Add a module to this Alphabet. If it already contains this module, an\n     * error is thrown.\n     *\n     * @param {Module} module - the module to add\n     * @throws {Error}\n     */\n    add(module) {\n        if (this.has(module)) {\n            throw new Error(`This alphabet already has a module '${module.stringify()}'.`);\n        }\n        _moduleDefinitions.get(this).push(module);\n    }\n\n    /**\n     * Does this Alphabet have this module?\n     *\n     * @param {Module} module\n     * @returns {Boolean} True if this Alphabet contains this module.\n     */\n    has(module) {\n        return undefined !== this.get(module);\n    }\n\n    /**\n     * Get a module from this Alphabet.\n     *\n     * @param {Module} module\n     * @returns {Module|undefined} the module\n     */\n    get(module) {\n        const found = _moduleDefinitions\n            .get(this)\n            .filter(\n                (m) => \n                    m.name === module.name && \n                    m.parameters.every((p) => p in module.parameters)\n            );\n        return 1 === found.length ? found[0] : undefined;\n    }\n\n    /**\n     * Create a String representation of this Alphabet.\n     *\n     * @returns {String}\n     */\n    stringify() {\n        return _moduleDefinitions.get(this).map((m) => m.stringify()).join(\", \");\n    }\n\n}\n\nexport {\n    Alphabet\n};\n","/*\n * Copyright 2017 Huub de Beer <huub@heerdebeer.org>\n *\n * This file is part of virtual_botanical_laboratory.\n *\n * virtual_botanical_laboratory is free software: you can redistribute it\n * and/or modify it under the terms of the GNU General Public License as\n * published by the Free Software Foundation, either version 3 of the License,\n * or (at your option) any later version.\n *\n * virtual_botanical_laboratory is distributed in the hope that it will be\n * useful, but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General\n * Public License for more details.\n *\n * You should have received a copy of the GNU General Public License along\n * with virtual_botanical_laboratory.  If not, see\n * <http://www.gnu.org/licenses/>.\n * \n */\nimport {Production} from \"./Production.js\";\n\n\nconst _successorList = new WeakMap();\n\n\nconst setupProbabilityMapping = function (production, successorList) {\n    let lower = 0;\n    for (const successor of successorList) {\n        if (0 >= successor.probability || successor.probability > 1) {\n            throw new Error(\"Probability should be between 0 and 1\");\n        }\n\n        successor.lower = lower;\n        successor.upper = successor.lower + successor.probability;\n        lower = successor.upper;\n    }\n\n    if (1 !== successorList.reduce((sum, pair) => sum += pair.probability, 0)) {\n        throw new Error(\"Total probability should be 1\");\n    }\n\n    _successorList.set(production, successorList);\n};\n\n/**\n * A StochasticProduction is a production with multiple possible rewriting\n * rules, each with a probability indicating the chance it will be chosen to\n * be used. The sum of the probabilities should be 1.\n *\n * @property {Successor} a successor is randomly chosen given the probability\n * of the rewriting rules of this StochasticProduction.\n */\nclass StochasticProduction extends Production {\n    /**\n     * Create a new instance of StochasticProduction.\n     *\n     * @param {Predecessor} predecessor\n     * @param {Object[]} successor - pairs of successors and their\n     * probabilities\n     * @param {Number} successor.probability - the probability of the successor\n     * @param {Successor} successor.successor - the successor\n     * @param {BooleanExpression} [condition = undefined] - an optional\n     * condition for this StochasticProduction.\n     */\n    constructor(predecessor, successors, condition = undefined) {\n        super(predecessor, undefined, condition);\n        setupProbabilityMapping(this, successors);\n    }\n\n    get successor() {\n        const random = Math.random();\n        const succ =  _successorList\n            .get(this)\n            .filter(\n                (successor) => successor.lower <= random && random < successor.upper\n            )[0].successor;\n        return succ;\n    }\n   \n    /**\n     * Create a String representation of this StochasticProduction.\n     *\n     * @returns {String}\n     */ \n    stringify() {\n        let str = this.predecessor.stringify();\n        if (this.isConditional()) {\n            str += `: ${this.condition.stringify()}`;\n        }\n        str += \"{\\n\";\n        str += _successorList\n            .get(this)\n            .map((successor) => `\\t${successor.probability} -> ${successor.successor.stringify()}`)\n            .join(\",\\n\");\n        str += \"\\n}\";\n        return str;\n    }\n}\n\nexport {\n    StochasticProduction\n};\n","/*\n * Copyright 2017 Huub de Beer <huub@heerdebeer.org>\n *\n * This file is part of virtual_botanical_laboratory.\n *\n * virtual_botanical_laboratory is free software: you can redistribute it\n * and/or modify it under the terms of the GNU General Public License as\n * published by the Free Software Foundation, either version 3 of the License,\n * or (at your option) any later version.\n *\n * virtual_botanical_laboratory is distributed in the hope that it will be\n * useful, but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General\n * Public License for more details.\n *\n * You should have received a copy of the GNU General Public License along\n * with virtual_botanical_laboratory.  If not, see\n * <http://www.gnu.org/licenses/>.\n * \n */\nimport {Expression} from \"./Expression.js\";\n\n/**\n * A BooleanExpression\n */\nclass BooleanExpression extends Expression {\n    /**\n     * Create a new instance of a BooleanExpression.\n     *\n     * @param {String[]} [formalParameters = []] - an optional list of formal\n     * parameter names.\n     * @param {Boolean} [expression = true] - an optional default value for\n     * this BooleanExpression.\n     */\n    constructor(formalParameters = [], expression = true) {\n        super(formalParameters, expression);\n    }\n\n    /**\n     * Create a String representation of this BooleanExpression.\n     *\n     * @returns {String}\n     */\n    stringify() {\n        return super\n            .stringify()\n            .replace(/&&/g, \" and \")\n            .replace(/\\|\\|/g, \" or \")\n            .replace(/!/g, \" not \")\n            .replace(/===/g, \"=\")\n            .replace(/!==/g, \"!=\");\n    }\n}\n\nexport {\n    BooleanExpression\n};\n","/*\n * Copyright 2017 Huub de Beer <huub@heerdebeer.org>\n *\n * This file is part of virtual_botanical_laboratory.\n *\n * virtual_botanical_laboratory is free software: you can redistribute it\n * and/or modify it under the terms of the GNU General Public License as\n * published by the Free Software Foundation, either version 3 of the License,\n * or (at your option) any later version.\n *\n * virtual_botanical_laboratory is distributed in the hope that it will be\n * useful, but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General\n * Public License for more details.\n *\n * You should have received a copy of the GNU General Public License along\n * with virtual_botanical_laboratory.  If not, see\n * <http://www.gnu.org/licenses/>.\n * \n */\nimport {\n    Lexer,\n    NUMBER,\n    IDENTIFIER,\n    BRACKET_OPEN,\n    BRACKET_CLOSE,\n    OPERATOR,\n    DELIMITER,\n    STRING,\n    KEYWORD\n} from \"./Lexer.js\";\nimport {ParseError} from \"./ParseError.js\";\nimport {LSystem} from \"./LSystem.js\";\nimport {ModuleTree} from \"./ModuleTree.js\";\nimport {ModuleDefinition} from \"./ModuleDefinition.js\";\nimport {ModuleValue} from \"./ModuleValue.js\";\nimport {ModuleApplication} from \"./ModuleApplication.js\";\n\nimport {Alphabet} from \"./Alphabet.js\";\n\nimport {Successor} from \"./Successor.js\";\nimport {Predecessor} from \"./Predecessor.js\";\nimport {Production} from \"./Production.js\";\nimport {StochasticProduction} from \"./StochasticProduction.js\";\n\nimport {BooleanExpression} from \"./BooleanExpression.js\";\nimport {NumericalExpression} from \"./NumericalExpression.js\";\n\nconst _lexer = new WeakMap();\nconst _idTable = new WeakMap();\n\n// Scopes\nconst MODULE = Symbol(\"MODULE\");\nconst PARAMETER = Symbol(\"PARAMETER\");\nconst GLOBAL = Symbol(\"GLOBAL\");\n\n// Contexts\nconst CONTEXT = Symbol(\"CONTEXT\");\nconst MODULE_NAME = Symbol(\"MODULE_NAME\");\n\nconst defined = function (parser, name, scope = MODULE) {\n    const idTable = _idTable.get(parser);\n    return idTable.find((id) => id.name === name && id.scope === scope);\n};\n\nconst installIdentifier = function (parser, identifierToken, scope = MODULE) {\n    const idTable = _idTable.get(parser);\n    const name = identifierToken.value;\n    if (!defined(parser, name, scope)) {\n        idTable.push({name, scope});\n    } else {\n        throw new ParseError(`'${name}' at ${identifierToken.position()} is already defined.`);\n    }\n};\n\nconst installModuleDefinition = function (parser, moduleDefinition) {\n    const identifier = defined(parser, moduleDefinition.name);\n    identifier.moduleDefinition = moduleDefinition;\n};\n\nconst lookAhead = function (parser, name, value = undefined, distance = 1, context = undefined) {\n    const token = _lexer.get(parser).lookAhead(distance, context);\n    return token.name === name && (undefined !== value ? token.value === value : true);\n};\n\nconst match = function (parser, name, value = undefined, context = undefined) {\n    const token = _lexer.get(parser).getNextToken(context);\n    if (token.name === name && (undefined !== value ? token.value === value : true)) {\n        return token;\n    } else {\n        throw new ParseError(`expected ${name.toString()}${undefined !== value ? \" with value '\" + value + \"'\": \"\"} at ${token.position()}`);\n    }\n};\n\nconst parseList = function (parser, recognizeFunction, closingBracket = \")\") {\n    if (lookAhead(parser, BRACKET_CLOSE, closingBracket)) {\n        return [];\n    } else {\n        const item = recognizeFunction.call(undefined, parser);\n        const list = [item];\n        if (lookAhead(parser, DELIMITER, \",\")) {\n            match(parser, DELIMITER, \",\");\n            return list.concat(parseList(parser, recognizeFunction));\n        } else {\n            return list;\n        }\n    }\n};\n\nconst parseDescription = function (parser) {\n    match(parser, KEYWORD, \"description\");\n    match(parser, DELIMITER, \":\");\n    return match(parser, STRING).value;\n};\n\nconst parseFormalParameter = function (parser) {\n    return match(parser, IDENTIFIER).value;\n};\n\nconst parseModuleDefinition = function (parser) {\n    const moduleNameToken = match(parser, IDENTIFIER, undefined, MODULE_NAME);\n    const moduleName = moduleNameToken.value;\n    installIdentifier(parser, moduleNameToken, MODULE);\n\n    let formalParameters = [];\n\n    if (lookAhead(parser, BRACKET_OPEN, \"(\")) {\n        match(parser, BRACKET_OPEN, \"(\");\n        if (lookAhead(parser, IDENTIFIER)) {\n            formalParameters = parseList(parser, parseFormalParameter);\n        }\n        match(parser, BRACKET_CLOSE, \")\");\n    }\n\n    const moduleDefinition = new ModuleDefinition(moduleName, formalParameters);\n    installModuleDefinition(parser, moduleDefinition);\n    return moduleDefinition;\n};\n\nconst parseAlphabet = function (parser) {\n    match(parser, KEYWORD, \"alphabet\");\n    match(parser, DELIMITER, \":\");\n    match(parser, BRACKET_OPEN, \"{\");\n    const alphabet = new Alphabet(parseList(parser, parseModuleDefinition, \"}\"));\n    match(parser, BRACKET_CLOSE, \"}\");\n    return alphabet;\n};\n\nconst parseNumExprUnit = function (parser) {\n    let numExpr = \"\";\n    let variables = [];\n    if (lookAhead(parser, IDENTIFIER)) {\n        const variable = match(parser, IDENTIFIER).value;\n        numExpr = variable;\n        variables = [variable];\n    } else if (lookAhead(parser, NUMBER)) {\n        numExpr = match(parser, NUMBER).value.toString();\n    } else if (lookAhead(parser, OPERATOR, \"-\")) {\n        match(parser, OPERATOR, \"-\");\n        const [expr, vars] = parseNumExprUnit(parser);\n        numExpr = `- ${expr}`;\n        variables = variables.concat(vars);\n    } else if (lookAhead(parser, BRACKET_OPEN, \"(\")) {\n        match(parser, BRACKET_OPEN, \"(\");\n        const [expr, vars] = parseNumExpr(parser);\n        match(parser, BRACKET_CLOSE, \")\");\n        numExpr = `(${expr})`;\n        variables = variables.concat(vars);\n    }\n    return [numExpr, variables];\n};\n\nconst parseNumFactor = function (parser) {\n    let [expr, vars] = parseNumExprUnit(parser);\n    if (lookAhead(parser, OPERATOR, \"^\")) {\n        match(parser, OPERATOR);\n        const [subExpr, subVars] = parseNumFactor(parser);\n        expr += ` ** ${subExpr}`;\n        vars = vars.concat(subVars);\n    }\n    return [expr, vars];\n};\n\nconst parseNumTerm = function (parser) {\n    let [expr, vars] = parseNumFactor(parser);\n    if (\n        lookAhead(parser, OPERATOR, \"*\") ||\n        lookAhead(parser, OPERATOR, \"/\")\n    ) {\n        const op = match(parser, OPERATOR).value;\n        const [subExpr, subVars] = parseNumFactor(parser);\n        expr += ` ${op} ${subExpr}`;\n        vars = vars.concat(subVars);\n    }\n\n    return [expr, vars];\n};\n\nconst parseNumExpr = function (parser) {\n    let [expr, vars] = parseNumTerm(parser);\n    if (\n        lookAhead(parser, OPERATOR, \"+\") ||\n        lookAhead(parser, OPERATOR, \"-\")\n    ) {\n        const op = match(parser, OPERATOR).value;\n        const [subExpr, subVars] = parseNumTerm(parser);\n        expr += ` ${op} ${subExpr}`;\n        vars = vars.concat(subVars);\n    }\n\n    return [expr, vars];\n};\n\nconst parseCompExpr = function (parser) {\n    const [leftExpr, leftVars] = parseNumExpr(parser);\n    \n    let op = match(parser, OPERATOR).value;\n    if (op === \"=\") {\n        op = \"===\";\n    } else if (op === \"!=\") {\n        op = \"!==\";\n    }\n        \n    const [rightExpr, rightVars] = parseNumExpr(parser);\n    \n    return [\n        `${leftExpr} ${op} ${rightExpr}`,\n        leftVars.concat(rightVars)\n    ];\n};\n\nconst parseBoolExprUnit = function (parser) {\n    let boolExpr = \"\";\n    let variables = [];\n\n    if (\n        lookAhead(parser, KEYWORD, \"true\") ||\n        lookAhead(parser, KEYWORD, \"false\")\n    ) {\n        boolExpr = match(parser, KEYWORD).value;\n    } else if (lookAhead(parser, KEYWORD, \"not\")) {\n        match(parser, KEYWORD);\n        const [expr, vars] = parseBoolExpr(parser);\n        boolExpr = `!${expr}`;\n        variables = variables.concat(vars);\n    } else if (lookAhead(parser, BRACKET_OPEN, \"(\")) {\n        match(parser, BRACKET_OPEN, \"(\");\n        const [expr, vars] = parseBoolExpr(parser);\n        boolExpr = `(${expr})`;\n        variables = variables.concat(vars);\n        match(parser, BRACKET_CLOSE, \")\");\n    } else {\n        const [expr, vars]  = parseCompExpr(parser);\n        boolExpr = expr;\n        variables = variables.concat(vars);\n    }\n     \n    return [boolExpr, variables];   \n};\n\nconst parseBoolFactor = function (parser) {\n    return parseBoolExprUnit(parser);\n};\n\nconst parseBoolTerm = function (parser) {\n    let [expr, vars] = parseBoolFactor(parser);\n    if (lookAhead(parser, KEYWORD, \"and\")) {\n        match(parser, KEYWORD);\n        const [subExpr, subVars] = parseBoolFactor(parser);\n        expr += ` && ${subExpr}`;\n        vars = vars.concat(subVars);\n    }\n    return [expr, vars];\n};\n\nconst parseBoolExpr = function (parser) {\n    let [expr, vars] = parseBoolTerm(parser);\n    if (lookAhead(parser, KEYWORD, \"or\")) {\n        match(parser, KEYWORD);\n        const [subExpr, subVars] = parseBoolTerm(parser);\n        expr += ` || ${subExpr}`;\n        vars = vars.concat(subVars);\n    }\n    return [expr, vars];\n};\n\nconst parseActualParameter = function (parser) {\n    const [expr, vars] = parseNumExpr(parser);\n    return new NumericalExpression(vars, expr);\n};\n\nconst parseActualModule = function (parser, ModuleClass) {\n    const moduleNameToken = match(parser, IDENTIFIER, undefined, MODULE_NAME);\n    const moduleName = moduleNameToken.value;\n\n    const module = defined(parser, moduleName, MODULE);\n\n    if (undefined === module) {\n        throw new ParseError(`Module '${moduleName}' at position ${moduleNameToken.position()} not in the alphabet.`);\n    }\n\n    let actualParameters = [];\n   \n    if (lookAhead(parser, BRACKET_OPEN, \"(\")) {\n        match(parser, BRACKET_OPEN, \"(\");\n        actualParameters = parseList(parser, parseActualParameter);\n        match(parser, BRACKET_CLOSE, \")\");\n    }\n\n    return new ModuleClass(moduleName, module.moduleDefinition, actualParameters);\n};\n\nconst parseModuleApplication = function (parser) {\n    return parseActualModule(parser, ModuleApplication);\n};\n\nconst parseModuleTree = function (parser, ModuleClass, withSubTrees = true) {\n    const moduleTree = new ModuleTree();\n\n    while (\n        !lookAhead(parser, OPERATOR, \"->\") && (\n            lookAhead(parser, IDENTIFIER, undefined, 1, MODULE_NAME) || \n            lookAhead(parser, BRACKET_OPEN, \"[\")\n        )\n    ) {\n        if (withSubTrees && lookAhead(parser, BRACKET_OPEN, \"[\")) {\n            // Match a sub tree\n            match(parser, BRACKET_OPEN, \"[\");\n            moduleTree.push(parseModuleTree(parser));\n            match(parser, BRACKET_CLOSE, \"]\");\n        } else {\n            // Match a module in the moduleTree\n            moduleTree.push(parseActualModule(parser, ModuleClass));\n        }\n    }\n\n    return moduleTree;\n};\n\nconst parseModuleValueTree = function (parser, withSubTrees = true) {\n    return parseModuleTree(parser, ModuleValue, withSubTrees);\n};\n\nconst parseModuleApplicationTree = function (parser, withSubTrees = true) {\n    return parseModuleTree(parser, ModuleApplication, withSubTrees);\n};\n\n\nconst parseSuccessor = function (parser) {\n    const successor = new Successor();\n\n    while (\n        lookAhead(parser, IDENTIFIER, undefined, 1, MODULE_NAME) || \n        lookAhead(parser, BRACKET_OPEN, \"[\")\n    ) {\n        if (lookAhead(parser, BRACKET_OPEN, \"[\")) {\n            // Match a sub tree\n            match(parser, BRACKET_OPEN, \"[\");\n            successor.push(parseSuccessor(parser));\n            match(parser, BRACKET_CLOSE, \"]\");\n        } else {\n            // Match a module in the successor\n            const module = parseModuleApplication(parser);\n            successor.push(module);\n        }\n    }\n\n    return successor;\n};\n\nconst parseAxiom = function (parser) {\n    match(parser, KEYWORD, \"axiom\");\n    match(parser, DELIMITER, \":\");\n    return parseModuleValueTree(parser);\n};\n\n\nconst parseStochasticSuccessorList = function (parser) {\n    const stochasticSuccessorList = [];\n    match(parser, BRACKET_OPEN, \"{\");\n    while (lookAhead(parser, NUMBER)) {\n        const probability = match(parser, NUMBER).value;\n        match(parser, OPERATOR, \"->\");\n        const successor = parseSuccessor(parser);\n        stochasticSuccessorList.push({probability, successor});\n        if (lookAhead(parser, DELIMITER, \",\")) {\n            match(parser, DELIMITER, \",\");\n        }\n    }\n    match(parser, BRACKET_CLOSE, \"}\");\n\n    // The propabilities should add up to 1.0 exactly.\n    const totalProbability = stochasticSuccessorList.reduce((sum, ps) => {\n        return sum + ps.probability;\n    }, 0);\n\n    if (totalProbability !== 1) {\n        throw new ParseError(`The probabilities of one module should add up to 1 exact, it adds up to ${totalProbability} instead.`);\n    }\n\n    return stochasticSuccessorList;\n};\n\nconst parsePredecessor = function (parser) {\n    const modules = [];\n    let hasLeftContext = false;\n\n    modules.push(parseModuleApplicationTree(parser, false));\n    \n    if (lookAhead(parser, BRACKET_OPEN, \"<\", 1, CONTEXT)) {\n        match(parser, BRACKET_OPEN, \"<\", CONTEXT);\n        modules.push(parseModuleApplication(parser));\n        hasLeftContext = true;\n    }\n    \n    if (lookAhead(parser, BRACKET_CLOSE, \">\", 1, CONTEXT)) {\n        match(parser, BRACKET_CLOSE, \">\", CONTEXT);\n        modules.push(parseModuleApplicationTree(parser));\n    }\n\n    let predecessor = undefined;\n\n    if (1 === modules.length) {\n        predecessor = new Predecessor(modules[0][0]);\n    } else if (2 === modules.length) {\n        if (hasLeftContext) {\n            predecessor = new Predecessor(modules[1]);\n            predecessor.leftContext = modules[0];\n        } else {\n            predecessor = new Predecessor(modules[0][0]);\n            predecessor.rightContext = modules[1];\n        }\n    } else {\n        predecessor = new Predecessor(modules[1]);\n        predecessor.leftContext = modules[0];\n        predecessor.rightContext = modules[2];\n    }\n\n    return predecessor;\n};\n\nconst parseProduction = function (parser) {\n    let production = undefined;\n    const predecessor = parsePredecessor(parser);\n    let successor = undefined;\n    let condition = undefined;\n    \n    if (lookAhead(parser, DELIMITER, \":\")) {\n        match(parser, DELIMITER, \":\");\n        if (!lookAhead(parser, BRACKET_OPEN, \"{\")) {\n            const [expr, vars] = parseBoolExpr(parser);\n            condition = new BooleanExpression(vars, expr);\n        }\n    }\n    \n    if (lookAhead(parser, BRACKET_OPEN, \"{\")) {\n        successor = parseStochasticSuccessorList(parser);\n        production = new StochasticProduction(predecessor, successor, condition);\n    } else if (lookAhead(parser, OPERATOR, \"->\")) {\n        match(parser, OPERATOR, \"->\");\n        successor = parseSuccessor(parser);\n        production = new Production(predecessor, successor, condition);\n    }\n\n    return production;\n};\n\nconst parseProductions = function (parser) {\n    match(parser, KEYWORD, \"productions\");\n    match(parser, DELIMITER, \":\");\n    match(parser, BRACKET_OPEN, \"{\");\n    const productions = parseList(parser, parseProduction, \"}\");\n    match(parser, BRACKET_CLOSE, \"}\");\n    return productions;\n};\n\nconst parseIgnore = function (parser) {\n    match(parser, KEYWORD, \"ignore\");\n    match(parser, DELIMITER, \":\");\n    match(parser, BRACKET_OPEN, \"{\");\n    const ignoreList = parseList(parser, parseModuleApplication, \"}\");\n    match(parser, BRACKET_CLOSE, \"}\");\n    return ignoreList;\n};\n\nconst parseLSystem = function (parser) {\n    let name = \"\";\n    if (lookAhead(parser, IDENTIFIER)) {\n        name = match(parser, IDENTIFIER).value;\n        match(parser, OPERATOR, \"=\");\n    }\n\n    match(parser, KEYWORD, \"lsystem\");\n    match(parser, BRACKET_OPEN, \"(\");\n\n    let description = \"\";\n    if (lookAhead(parser, KEYWORD, \"description\")) {\n        description = parseDescription(parser);\n        match(parser, DELIMITER, \",\");\n    }\n\n    const alphabet = parseAlphabet(parser);\n    match(parser, DELIMITER, \",\");\n    const axiom = parseAxiom(parser);\n    match(parser, DELIMITER, \",\");\n    const productions = parseProductions(parser);\n    let ignore = [];\n    if (lookAhead(parser, DELIMITER, \",\")) {\n        match(parser, DELIMITER, \",\");\n        ignore = parseIgnore(parser);\n    }\n    match(parser, BRACKET_CLOSE, \")\");\n\n    const lsystem = new LSystem(name, description, alphabet, axiom, productions, ignore);\n    \n    return lsystem;\n};\n\nconst parseConstant = function (parser) {\n    const constantNameToken = match(parser, IDENTIFIER);\n    const name = constantNameToken.value;\n\n    installIdentifier(parser, constantNameToken, GLOBAL);\n    match(parser, OPERATOR, \"=\");\n    const value = parseActualParameter(parser);\n    match(parser, DELIMITER, \";\");\n    \n    return {name, value};\n};\n\nconst parse = function (parser) {\n    // Imports\n    // ToDo\n\n    const globalContext = {};\n    // Constants\n    while (lookAhead(parser, IDENTIFIER) && !lookAhead(parser, KEYWORD, \"lsystem\", 3)) {\n        const constant = parseConstant(parser);\n        globalContext[constant.name] = constant.value;\n    }\n\n    // LSystem\n    const lsystem = parseLSystem(parser);\n    lsystem.globalContext = globalContext;\n\n    return lsystem;\n};\n\n/**\n * Parser for LSystem input strings\n */\nclass Parser {\n\n    /**\n     * Create a new Parser\n     */\n    constructor() {\n    }\n\n    /**\n     * Parse a LSYSTEM definition input string\n     *\n     * @param {String} input - the input string to parse\n     *\n     * @returns {{LSystem, Object}} An object containing the LSystem and a\n     * global constants used in that LSystem, if any.\n     */\n    parse(input) {\n        _lexer.set(this, new Lexer(input));\n        _idTable.set(this, []);\n        return parse(this);\n    }\n}\n\nexport {\n    Parser,\n    CONTEXT,\n    PARAMETER,\n    MODULE_NAME\n};\n","/*\n * Copyright 2017 Huub de Beer <huub@heerdebeer.org>\n *\n * This file is part of virtual_botanical_laboratory.\n *\n * virtual_botanical_laboratory is free software: you can redistribute it\n * and/or modify it under the terms of the GNU General Public License as\n * published by the Free Software Foundation, either version 3 of the License,\n * or (at your option) any later version.\n *\n * virtual_botanical_laboratory is distributed in the hope that it will be\n * useful, but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General\n * Public License for more details.\n *\n * You should have received a copy of the GNU General Public License along\n * with virtual_botanical_laboratory.  If not, see\n * <http://www.gnu.org/licenses/>.\n * \n */\nimport {ModuleTree} from \"./ModuleTree.js\";\nimport {IdentityProduction} from \"./IdentityProduction.js\";\nimport {Parser} from \"./Parser.js\";\n\nconst _name = new WeakMap();\nconst _description = new WeakMap();\nconst _alphabet = new WeakMap();\nconst _axiom = new WeakMap();\nconst _productions = new WeakMap();\nconst _ignore = new WeakMap();\nconst _globalContext = new WeakMap();\n\nconst _currentDerivation = new WeakMap();\nconst _derivationLength = new WeakMap();\n\nconst ignore = function (lsystem, edge) {\n    return 0 < lsystem.ignore.filter(m => m.equals(edge)).length;\n};\n\nconst actualGlobalContext = function (lsystem) {\n    const actualContext = {};\n\n    Object.entries(lsystem.globalContext).forEach((keyValue) => {\n        const [name, valueExpr] = keyValue;\n        actualContext[name] = valueExpr.evaluate(actualContext);\n    });\n\n    return actualContext;\n};\n\nconst selectBestProduction = function (lsystem, productions) {\n    if (1 === productions.length) {\n        return productions[0];\n    } else {\n        // For context-sensitive L-systems, there can be multiple rules that\n        // match. If so, choose the most specific one: a context-sensitive rule\n        // has precedence over a context-free one. \n        //\n        // If multiple context-sensitive\n        // rules apply, choose the one with the longest matching context (?)\n\n        const contextSensitive = productions.filter(p => p.predecessor.isContextSensitive());\n\n        if (0 < contextSensitive.length) {\n            return contextSensitive[0];\n        } else {\n            return productions[0];\n        }\n    }\n};\n\nconst findProduction = function (lsystem, module, moduleTree, pathTaken, edgeIndex) {\n    const candidates = lsystem\n        .productions\n        .filter((p) => p.matches(module, moduleTree, pathTaken, edgeIndex, lsystem.ignore, actualGlobalContext(lsystem)));\n\n    if (0 < candidates.length) {\n        return selectBestProduction(lsystem, candidates);\n    } else {\n        // Modules that do not match any production are copied to the\n        // successor directly. This is also known as the 'identity' production\n        // rule.\n        return new IdentityProduction(module);\n    }\n};\n\nconst derive = function(lsystem, moduleTree, pathTaken = [], edgeIndex = 0) {\n    const successor = new ModuleTree();\n\n    while (edgeIndex < moduleTree.length) {\n        const edge = moduleTree[edgeIndex];\n        if (edge instanceof ModuleTree) {\n            successor.push(derive(lsystem, edge, pathTaken, 0));\n        } else {\n            const production = findProduction(lsystem, edge, moduleTree, pathTaken, edgeIndex);\n            const rewrittenNode = production.follow(edge, actualGlobalContext(lsystem));\n\n            //console.log(edgeIndex, production.stringify());\n\n            for (const successorNode of rewrittenNode) {\n                successor.push(successorNode);\n            }\n\n            // Add node to the path taken if it should not be ignored in the\n            // context.\n            if (!ignore(lsystem, edge)) {\n                pathTaken.push(edge);\n            }\n        }\n\n        edgeIndex++;\n    }\n\n    return successor;\n};\n\n/**\n * An LSystem model\n *\n * @property {String} name - this LSystem's name\n * @property {String} description - this LSystem's description\n * @property {Alphabet} alphabet - the set of modules of this LSystem\n * @property {ModuleTree} axiom - the axion of this LSystem\n * @property {Production[]} productions - the set of productions of this\n * LSystem\n * @property {Integer} derivationLength - the length of the derivation of this\n * LSystem\n * @property {Object{ globalContext - the global context in which this lsystem\n * exists. Used for constants and references to other lsystems.\n */\nconst LSystem = class {\n    /**\n     * Create a new instance of LSystem.\n     *\n     * @param {String} name\n     * @param {String} description\n     * @param {Alphabet} alphabet\n     * @param {ModuleTree} axiom\n     * @param {Production[]} productions\n     * @param {Module[]} ignore\n     */\n    constructor(name, description, alphabet, axiom, productions, ignore = []) {\n        _globalContext.set(this, {});\n        _name.set(this, name);\n        _description.set(this, description);\n        _alphabet.set(this, alphabet);\n        _axiom.set(this, axiom);\n        _productions.set(this, productions);\n        _ignore.set(this, ignore);\n\n        this.reset();\n    }\n\n    /**\n     * Parse an LSystem input string and return the represented LSystem.\n     *\n     * @param {String} input\n     * @returns {LSystem} the parsed LSystem\n     * @throws {ParseError|LexicalError} if something goes wrong during\n     * parsing, an error is thrown.\n     */\n    static parse(input) {\n        return (new Parser()).parse(input);\n    }\n\n    get name() {\n        return _name.get(this) || \"\";\n    }\n\n    set name(newName) {\n        _name.set(this, newName);\n    }\n    \n    /**\n     * Does this LSystem have a name?\n     *\n     * @returns {Boolesn} this LSystem has a non-empty name\n     */\n    hasName() {\n        return 0 < this.name.length;\n    }\n\n    get description() {\n        return _description.get(this) || \"\";\n    }\n\n    set description(newDescription) {\n        _description.set(this, newDescription);\n    }\n\n    /**\n     * Does this LSystem have a description?\n     *\n     * @returns {Boolean} this LSystem has a non-empty description\n     */\n    hasDescription() {\n        return 0 < this.description.length;\n    }\n\n    get globalContext() {\n        return _globalContext.get(this);\n    }\n\n    set globalContext(context) {\n        _globalContext.set(this, context);\n    }\n\n    get alphabet() {\n        return _alphabet.get(this);\n    }\n\n    get axiom() {\n        return _axiom.get(this);\n    }\n\n    get productions() {\n        return _productions.get(this);\n    }\n\n    get ignore() {\n        return _ignore.get(this);\n    }\n\n    get derivationLength() {\n        return _derivationLength.get(this);\n    }\n\n    /**\n     * Create a String representation of this LSystem. This representation can\n     * be parsed again to an LSystem equal to this one.\n     *\n     * @return {String}\n     */\n    stringify() {\n        let lsystem = \"\";\n\n        // Serialize the global context, if any.\n        let constants = Object.keys(this.globalContext).map(key => `${key} = ${this.globalContext[key].stringify()}`).join(\";\\n\");\n        if (constants.length > 0) {\n            constants += \";\\n\\n\";\n        }\n\n        lsystem += constants;\n        \n        // Serialize the LSystem definition\n        if (this.hasName()) {\n            lsystem += `${this.name} = `;\n        }\n\n        lsystem += \"lsystem(\";\n        if (this.hasDescription()) {\n            lsystem += `description: \"${this.description}\", `;\n        }\n            \n        lsystem += `alphabet: {${this.alphabet.stringify()}}, axiom: ${this.axiom.stringify()}, productions: {${this.productions.map((p) => p.stringify()).join(\", \")}}`;\n\n        if (0 < this.ignore.length) {\n            lsystem += `, ignore: {${this.ignore.map(m => m.stringify()).join(\", \")}}`;\n        }\n        lsystem += \")\";\n        return lsystem;\n    }\n\n    /**\n     * Taking the current state of this LSystem as the predecessor, derive a\n     * successor.\n     *\n     * @param {Number} [steps = 1] - the number of derivations to perform,\n     * defaults to one step.\n     *\n     * @returns {Successor} the successor.\n     */\n    derive(steps = 1) {\n        for (let i = 0; i < steps; i++) {\n            // do a derivation\n            //console.log(\"predecessor: \", _currentDerivation.get(this).stringify());\n            const predecessor = _currentDerivation.get(this);\n            _currentDerivation.set(this, derive(this, predecessor));\n            _derivationLength.set(this, this.derivationLength + 1);\n        }\n\n        return _currentDerivation.get(this);\n    }\n\n    /**\n     * Reset the LSystem to the starting state.\n     */\n    reset() {\n        _currentDerivation.set(this, this.axiom);\n        _derivationLength.set(this, 0);\n    }\n};\n\nexport {\n    LSystem\n};\n","/*\n * Copyright 2017 Huub de Beer <huub@heerdebeer.org>\n *\n * This file is part of virtual_botanical_laboratory.\n *\n * virtual_botanical_laboratory is free software: you can redistribute it\n * and/or modify it under the terms of the GNU General Public License as\n * published by the Free Software Foundation, either version 3 of the License,\n * or (at your option) any later version.\n *\n * virtual_botanical_laboratory is distributed in the hope that it will be\n * useful, but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General\n * Public License for more details.\n *\n * You should have received a copy of the GNU General Public License along\n * with virtual_botanical_laboratory.  If not, see\n * <http://www.gnu.org/licenses/>.\n * \n */\n\nconst _function = new WeakMap();\n\n/**\n * A command in an interpretation to make a step in rendering an derivation in an LSystem.\n */\nclass Command {\n\n    /**\n     * Create a new Command. If no arguments given, the Command is a \"skip\"\n     * command: it does do nothing.\n     *\n     * @param {String[]} - a list of parameters to the command. Can be omitted\n     * @param {String|Function} - a function or a string representing a\n     * function body that is executed when this command is run.\n     */\n    constructor(...args) {\n        let func;\n\n        if (0 >= args.length) {\n            // create an empty function; does do nothing\n            func = function () {};\n        } else if (1 === args.length) {\n            // create with a function or a constant\n            if (\"function\" === typeof args[0]) {\n                func = args[0];\n            } else {\n                func = function () { return args[0]; };\n            }\n        } else if (2 === args.length) {\n            // create with formal parameters and a function body in a string\n            func = new Function(args[0], args[1]);\n        } else {\n            // ?\n            throw new Error(`Expected at most 2 arguments, got ${args.length} instead.`);\n        }\n\n        _function.set(this, func);\n    }\n\n    /**\n     * Execute this Command in this interpretation given the supplier\n     * parameters\n     *\n     * @param {Interpretation} interpretation - the interpretation in which this command is executed\n     * @param {Array} [parameters = []] - the parameters used in this Commmand\n     */\n    execute(interpretation, ...parameters) {\n        _function.get(this).apply(interpretation, parameters);\n    }\n\n    /**\n     * Create a String representation of this Command.\n     *\n     * @returns {String}\n     */\n    toString() {\n        const functionLines = _function.get(this).toString().split(\"\\n\");\n\n        let lines = [];\n        \n        if (0 < functionLines.length) {\n            if (\"function anonymous(\" === functionLines[0]) {\n                lines = functionLines.slice(2, -1);\n            } else {\n                lines = functionLines.slice(1, -1);\n            }\n        }\n\n        return lines.map(l => l.trim()).join(\"\\n\");\n    }\n}\n\nexport {\n    Command\n};\n","/*\n * Copyright 2017 Huub de Beer <huub@heerdebeer.org>\n *\n * This file is part of virtual_botanical_laboratory.\n *\n * virtual_botanical_laboratory is free software: you can redistribute it\n * and/or modify it under the terms of the GNU General Public License as\n * published by the Free Software Foundation, either version 3 of the License,\n * or (at your option) any later version.\n *\n * virtual_botanical_laboratory is distributed in the hope that it will be\n * useful, but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General\n * Public License for more details.\n *\n * You should have received a copy of the GNU General Public License along\n * with virtual_botanical_laboratory.  If not, see\n * <http://www.gnu.org/licenses/>.\n * \n */\nimport {Command} from \"./Command.js\";\n\n\nconst property = function (name, type, defaultValue, convert) {\n    return {\n        \"name\": name,\n        \"type\": type,\n        \"default\": defaultValue,\n        \"converter\": convert\n    };\n};\n\nconst number = function (name, defaultValue = 0) {\n    return property(name, \"text\", defaultValue, (n) => parseFloat(n));\n};\n\nconst bool = function (name, defaultValue = false) {\n    return property(name, \"text\", defaultValue, (b) => \"true\" === b ? true : false);\n};\n\nconst string = function (name, defaultValue = \"\") {\n    return property(name, \"text\", defaultValue, (s) => s);\n};\n\nconst color = function (name, defaultValue = \"black\") {\n    return property(name, \"color\", defaultValue, (s) => s);\n};\n\nconst _commands = new WeakMap();\nconst _initialState = new WeakMap();\nconst _states = new WeakMap();\nconst _registeredProperties = new WeakMap();\n\nconst renderTree = function (interpretation, moduleTree) {\n    for (const item of moduleTree) {\n        if (Array.isArray(item)) {\n            interpretation.enter();\n            renderTree(interpretation, item);\n            interpretation.exit();\n        } else {\n            interpretation.execute(item.name, Object.values(item.values));\n        }\n    }\n};\n\n/**\n * An Interpretation of a LSystem\n *\n * @property {Object} state - the current state of this Interpretation.\n * @property {Object} registeredProperties - the properties that are\n * registered in this Interpretation.\n * @property {Object} properties - the properties that have been set in this\n * Interpretation\n * @property {Object} commands - the commands that have been defined in this\n * Interpretation.\n */\nclass Interpretation {\n    /**\n     * Create a new instance of an LSystem Interpretation.\n     * \n     * @param {RenderingContext|SVGElement} canvas - the canvas to draw on.\n     */\n    constructor(initialState = {}) {\n        _initialState.set(this, initialState);\n        _states.set(this, []);\n        _commands.set(this, {});\n        _registeredProperties.set(this, []);\n\n        this.registerProperty(\n            bool(\"animate\"),\n            number(\"derivationLength\")\n        );\n    }\n\n    get state() {\n        const states = _states.get(this);\n        if (0 === states.length) {\n            this.initialize();\n        }\n\n        return states[states.length - 1];\n    }\n\n    get registeredProperties() {\n        return _registeredProperties.get(this);\n    }\n\n    get properties() {\n        return this.state();\n    }\n\n    get commands() {\n        return _commands.get(this);\n    }\n\n    /**\n     * A command function has the following signature:\n     *\n     * @callback commandFunction\n     * @param {Number[]} [parameters = []] - a list of numerical parameters\n     * you can use in the command;\n     */\n\n    /**\n     * Execute a command with given parameters in the context of this\n     * Interpretation.\n     *\n     * @param {String} name - the name of the command to execute.\n     * @param {Array} [parameters = []] - an optional list of actual\n     * parameters to apply when the command is executed.\n     */\n    execute(name, parameters = []) {\n        const command = this.commands[name];\n\n        if (undefined === command) {\n            // By default commands that are unknown are ignored, only those\n            // that need interpretation should be added to the interpretation.\n            return;\n        }\n\n        if (\"string\" === typeof command) {\n            this.execute(command, parameters);\n        } else if (command instanceof Command) {\n            command.execute(this, parameters);\n        } else {\n            // By default commands that are unknown are ignored, only those\n            // that need interpretation should be added to the interpretation.\n            return;\n        }\n    }\n\n    /**\n     * Register a number of properties for this interpretation. These\n     * registered properties are applied on initialisation and when\n     * entering/leaving a sub tree.\n     *\n     * @param {String} names - the names of the properties to register\n     */\n    registerProperty(...properties) {\n        properties.forEach(p => {\n            this.registeredProperties.push(p);\n        });\n    }\n\n    /**\n     * Get a registered property by name\n     *\n     * @param {String} name  - the name of the registered property to get.\n     * @returns {Object}\n     */\n    getRegisteredProperty(name) {\n        return this.registeredProperties.find((p) => name === p.name);\n    }\n\n    /**\n     * Set a property of this Interpretation.\n     *\n     * @param {String} name - the name of the property.\n     * @param {Object} value - the new value of the property.\n     */\n    setProperty(name, value) {\n        this.state[name] = value;\n    }\n    \n    /**\n     * Get a property of this Interpretation. If no such property exists, or\n     * if its value is undefined or null, return the defaultValue.\n     *\n     * @param {String} name - the name of the property.\n     * @param {defaultValue} [defaultValue = 0] - the default value of this\n     * property if no such property exists or its value is undefined or null.\n     *\n     * @returns {Object} the value of the property.\n     */\n    getProperty(name, defaultValue = 0) {\n        const value = this.state[name];\n        return (undefined === value || null === value) ? defaultValue : value;\n    }\n\n    /**\n     * Set a command in this Interpretation.\n     *\n     * @param {String} name - the name of the command to set.\n     * @param {Command} command - the command.\n     */\n    setCommand(name, command) {\n        this.commands[name] = command;\n    }\n\n    /**\n     * Does this Interpretation have defined a command?\n     *\n     * @param {String} name - the name of the command to check\n     * @returns {Boolean} True if there exist a command with name in this\n     * Interpretation\n     */\n    hasCommand(name) {\n        return undefined !== this.getCommand(name);\n    }\n\n    /**\n     * Does this Interpretation have this property?\n     *\n     * @param {String} name - the name of the property to check if it is\n     * available in this interpretation\n     *\n     * @returns {Boolean} True if there exists a property with name in this\n     * interpretation.\n     */\n    hasProperty(name) {\n        return undefined !== this.getProperty(name);\n    }\n    \n    /**\n     * Apply all registered properties. Needs to be implemented in sub classes\n     * to take an effect.\n     */\n    applyProperties() {\n    }\n\n    /**\n     * Alias a command.\n     *\n     * @param {String|String[]} aliasNames - a list of aliases for command.\n     * @param {String} commandName - a command's name.\n     */\n    alias(aliasNames, commandName) {\n        if (!Array.isArray(aliasNames)) {\n            aliasNames = [aliasNames];\n        }\n\n        for(const alias of aliasNames) {\n            this.commands[alias] = commandName;\n        }\n    }\n\n    /**\n     * Get a command in this Interpretation.\n     *\n     * @param {String} name - the name of the command to get.\n     * @returns {Command|undefined}\n     */\n    getCommand(name) {\n        const command = this.commands[name];\n\n        if (command instanceof Command) {\n            return command;\n        } else if (\"string\" === typeof command) {\n            return this.getCommand(command);\n        } else {\n            return undefined;\n        }\n    }\n\n    /**\n     * Initialize a new rendering of this interpretation.\n     */\n    initialize() {\n        _states.set(this, [Object.assign({}, _initialState.get(this))]);\n        this.applyProperties();\n    }\n\n    /**\n     * Render a moduleTree given this Interpretation.\n     *\n     * @param {ModuleTree} moduleTree - the moduleTree to render on the\n     * canvas.\n     */\n    render(moduleTree) {\n        this.initialize();\n        renderTree(this, moduleTree);\n        this.finalize();\n    }\n\n    /**\n     * Enter a sub tree.\n     */\n    enter() {\n        const currentState = Object.assign({}, this.state);\n        _states.get(this).push(currentState);\n        this.applyProperties();\n    }\n\n    /**\n     * Exit a sub tree.\n     */\n    exit() {\n        this.applyProperties();\n        _states.get(this).pop();\n    }\n\n    /**\n     * Finalize a rendering of this interpretation. Needs to be implemented in\n     * concrete subclasses.\n     */\n    finalize() {\n    }\n\n    /**\n     * Reset this Interpretation to the original state.\n     */\n    reset() {\n        this.initialize();\n    }\n}\n\nexport {\n    Interpretation,\n    number,\n    bool,\n    string,\n    color,\n    property\n};\n","/*\n * Copyright 2017 Huub de Beer <huub@heerdebeer.org>\n *\n * This file is part of virtual_botanical_laboratory.\n *\n * virtual_botanical_laboratory is free software: you can redistribute it\n * and/or modify it under the terms of the GNU General Public License as\n * published by the Free Software Foundation, either version 3 of the License,\n * or (at your option) any later version.\n *\n * virtual_botanical_laboratory is distributed in the hope that it will be\n * useful, but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General\n * Public License for more details.\n *\n * You should have received a copy of the GNU General Public License along\n * with virtual_botanical_laboratory.  If not, see\n * <http://www.gnu.org/licenses/>.\n * \n */\nimport {Interpretation, number, bool, color, string} from \"./Interpretation.js\";\nimport {Command} from \"./Command.js\";\n\n// Default values\nconst X = 0;\nconst Y = 0;\nconst D = 2;\nconst DELTA = Math.PI / 2;\nconst ALPHA = 0;\n\n/**\n * The color of a closed shape.\n */\nconst FILL_COLOR = \"fill-color\";\n\n/**\n * The color of a line\n */\nconst LINE_COLOR = \"line-color\";\n\n/**\n * The width of a line\n */\nconst LINE_WIDTH = \"line-width\";\n\n/**\n * The type of line join. See also\n * <https://developer.mozilla.org/en-US/docs/Web/API/CanvasRenderingContext2D/lineJoin>\n */\nconst LINE_JOIN = \"line-join\";\n\n/**\n * A TurtleInterpretation as proposed in the book \"The algorithmic beauty of\n * plants\", chapter 1.\n *\n * @property {Number} x - current x coordinate\n * @property {Number} y - current y coordinate\n * @property {Number} d - distance to draw or move\n * @property {Number} alpha - the current angle\n * @property {Number} delta - change of angle to rotate\n */\nclass TurtleInterpretation extends Interpretation {\n    constructor(initialState = {}) {\n        super(initialState);\n\n        this.setCommand(\"+\", new Command(function () {\n            this.alpha = this.alpha + this.delta;\n        }));\n\n        this.setCommand(\"-\", new Command(function () {\n            this.alpha = this.alpha - this.delta;\n        }));\n\n        this.setCommand(\"f\", new Command(function () {\n            this.x = this.x + this.d * Math.cos(this.alpha);\n            this.y = this.y + this.d * Math.sin(this.alpha);\n\n            this.moveTo(this.x, this.y);\n        }));\n        \n        this.setCommand(\"F\", new Command(function () {\n            this.x = this.x + this.d * Math.cos(this.alpha);\n            this.y = this.y + this.d * Math.sin(this.alpha);\n\n            this.lineTo(this.x, this.y);\n        }));\n\n        this.registerProperty(\n            number(\"x\", 100),\n            number(\"y\", 200),\n            number(\"width\", 600),\n            number(\"height\", 400),\n            number(\"d\", 10),\n            number(\"alpha\", 90),\n            number(\"delta\", 1),\n            bool(\"close\", false),\n            number(LINE_WIDTH), \n            color(LINE_COLOR),\n            string(LINE_JOIN),\n            color(FILL_COLOR)\n        );\n    }\n\n    /**\n     * Move the pen to (x, y) without drawing a line\n     *\n     * @param {Number} x - the x coordinate\n     * @param {Number} y - the y coordinate\n     */\n    moveTo(x, y) {\n        // to be implemented by a sub class \n        console.log(x, y);\n    }\n\n    /**\n     * Move the pen to (x, y) while drawing a line\n     *\n     * @param {Number} x - the x coordinate\n     * @param {Number} y - the y coordinate\n     */\n    lineTo(x, y) {\n        // to be implemented by a sub class \n        console.log(x, y);\n    }\n\n    get x() {\n        return this.getProperty(\"x\", X);\n    }\n\n    set x(value = 0) {\n        this.setProperty(\"x\", value);\n    }\n\n    get y() {\n        return this.getProperty(\"y\", Y);\n    }\n\n    set y(value = 0) {\n        this.setProperty(\"y\", value);\n    }\n\n    get d() {\n        return this.getProperty(\"d\", D);\n    }\n\n    set d(value = 1) {\n        this.setProperty(\"d\", value);\n    }\n\n    get alpha() {\n        return this.getProperty(\"alpha\", ALPHA);\n    }\n\n    set alpha(value = 0) {\n        this.setProperty(\"alpha\", value);\n    }\n\n    get delta() {\n        return this.getProperty(\"delta\", DELTA);\n    }\n\n    set delta(value = 1) {\n        this.setProperty(\"delta\", value);\n    }\n\n}\n\nexport {\n    TurtleInterpretation,\n    LINE_WIDTH,\n    LINE_COLOR,\n    LINE_JOIN,\n    FILL_COLOR,\n};\n","/*\n * Copyright 2017 Huub de Beer <huub@heerdebeer.org>\n *\n * This file is part of virtual_botanical_laboratory.\n *\n * virtual_botanical_laboratory is free software: you can redistribute it\n * and/or modify it under the terms of the GNU General Public License as\n * published by the Free Software Foundation, either version 3 of the License,\n * or (at your option) any later version.\n *\n * virtual_botanical_laboratory is distributed in the hope that it will be\n * useful, but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General\n * Public License for more details.\n *\n * You should have received a copy of the GNU General Public License along\n * with virtual_botanical_laboratory.  If not, see\n * <http://www.gnu.org/licenses/>.\n * \n */\nimport {\n    TurtleInterpretation,\n    LINE_WIDTH,\n    LINE_COLOR,\n    LINE_JOIN,\n    FILL_COLOR\n} from \"./TurtleInterpretation.js\";\n\nconst _canvas = new WeakMap();\n\n/**\n * The TurtleInterpretation implemented on the HTML Canvas.\n *\n * @property {CanvasRenderingContext2D} canvas\n * @property {HTMLCanvasElement} canvasElement\n */\nclass CanvasTurtleInterpretation extends TurtleInterpretation {\n\n    /**\n     * Create a new CanvasTurtleInterpretation\n     *\n     * @param {CanvasRenderingContext2D} canvas\n     * @param {Object} [initialState = {}] - the initial state of the\n     * interpretation\n     */\n    constructor(canvas, initialState = {}) {\n        super(initialState);\n        _canvas.set(this, canvas);\n    }\n\n    get canvas() {\n        return _canvas.get(this);\n    }\n\n    get canvasElement() {\n        return this.canvas.canvas;\n    }\n\n    initialize() {\n        super.initialize();\n        this.canvas.clearRect(0, 0, this.canvasElement.width, this.canvasElement.height);\n        this.canvas.beginPath();\n        this.canvas.moveTo(this.x, this.y);\n    }\n\n    finalize() {\n        super.finalize();\n        if (this.getProperty(\"close\", false)) {\n            this.canvas.closePath();\n        }\n        this.canvas.stroke();\n    }\n\n    applyProperties() {\n        if (this.hasProperty(LINE_WIDTH)) {\n            this.canvas.lineWidth = this.getProperty(LINE_WIDTH);\n        }\n\n        if (this.hasProperty(LINE_COLOR)) {\n            this.canvas.strokeStyle = this.getProperty(LINE_COLOR);\n        }\n\n        if (this.hasProperty(LINE_JOIN)) {\n            this.canvas.lineJoin = this.getProperty(LINE_JOIN);\n        }\n\n        if (this.hasProperty(FILL_COLOR)) {\n            this.canvas.fillStyle = this.getProperty(FILL_COLOR);\n        }\n    }\n\n    moveTo(x, y) {\n        this.canvas.moveTo(x, y);\n    }\n\n    lineTo(x, y) {\n        this.applyProperties();\n\n        this.canvas.lineTo(x, y);\n        this.canvas.stroke();\n    }\n\n    enter() {\n        super.enter();\n\n        this.canvas.beginPath();\n        this.canvas.moveTo(this.x, this.y);\n    }\n\n    exit() {\n        super.exit();\n\n        if (this.getProperty(\"close\", false)) {\n            this.canvas.closePath();\n        }\n        this.canvas.stroke();\n        this.canvas.moveTo(this.x, this.y);\n    }\n        \n}\n\nexport {\n    CanvasTurtleInterpretation\n};\n","/*\n * Copyright 2017 Huub de Beer <huub@heerdebeer.org>\n *\n * This file is part of virtual_botanical_laboratory.\n *\n * virtual_botanical_laboratory is free software: you can redistribute it\n * and/or modify it under the terms of the GNU General Public License as\n * published by the Free Software Foundation, either version 3 of the License,\n * or (at your option) any later version.\n *\n * virtual_botanical_laboratory is distributed in the hope that it will be\n * useful, but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General\n * Public License for more details.\n *\n * You should have received a copy of the GNU General Public License along\n * with virtual_botanical_laboratory.  If not, see\n * <http://www.gnu.org/licenses/>.\n * \n */\nimport {LSystem} from \"./lsystem/LSystem.js\";\nimport {Interpretation} from \"./interpretation/Interpretation.js\";\nimport {CanvasTurtleInterpretation} from \"./interpretation/CanvasTurtleInterpretation.js\";\n\nimport {Command} from \"./interpretation/Command.js\";\n\nconst DEFAULT_WIDTH = 800;// px\nconst DEFAULT_HEIGHT = 600;// px\nconst SPEED = 500; // ms\n\nconst _element = new WeakMap();\nconst _lsystem = new WeakMap();\nconst _interpretation = new WeakMap();\n\nconst _running = new WeakMap();\nconst _animate = new WeakMap();\nconst _speed = new WeakMap();\n\nconst getProperty = function(map, path, defaultValue) {\n    const levels = path.split(\".\");\n    let level = 0;\n    while (level < levels.length) {\n        const name = levels[level];\n        if (undefined !== map[name]) {\n            map = map[name];\n        } else {\n            return defaultValue;\n        }\n\n        level++;\n    }\n\n    return undefined !== map ? map : defaultValue;\n};\n\nconst createInterpretation = function (lab, interpretationConfig = {}) {\n    let interpretation;\n    if (!(interpretationConfig instanceof Interpretation)) {\n        const element = document.createElement(\"canvas\");\n        element.width = getProperty(interpretationConfig, \"config.width\", DEFAULT_WIDTH);\n        element.height = getProperty(interpretationConfig, \"config.height\", DEFAULT_HEIGHT);\n\n        _element.set(lab, element);\n\n        interpretation = new CanvasTurtleInterpretation(element.getContext(\"2d\"), interpretationConfig.config);\n\n        // Get all possible commands and their definitions, if any.\n        const availableCommands = {};\n        lab\n            .lsystem\n            .alphabet\n            .moduleDefinitions\n            .forEach((md) => {\n                if (!interpretation.hasCommand(md.name)) {\n                    availableCommands[md.name] = undefined;\n                }\n            });\n       \n        // Commands can be (re)defined in a configuration of an Interpretation \n        if (\"commands\" in interpretationConfig) {\n            Object\n                .entries(interpretationConfig[\"commands\"])\n                .forEach((entry) => {\n                    const [name, func] = entry;\n                    availableCommands[name] = func;\n                });\n        }\n\n        Object\n            .keys(availableCommands)\n            .forEach((name) => interpretation.setCommand(name, new Command(availableCommands[name])));\n    } else {\n        interpretation = interpretationConfig;\n    }\n\n    _interpretation.set(lab, interpretation);\n};\n\nconst createLSystem = function (lab, lsystem = \"\") {\n\n    if (!(lsystem instanceof LSystem)) {\n        // Interpret lsystem as a string to parse into an LSystem. Will\n        // throw a parse error if it does not succeed\n        lsystem = LSystem.parse(lsystem);\n    }\n\n    _lsystem.set(lab, lsystem);\n};\n\nconst initializeAndRun = function (lab, derivationLength = 0) {\n    if (!Number.isInteger(derivationLength) || 0 >= derivationLength) {\n        derivationLength = 0;\n    }\n    lab.run(derivationLength);\n};\n\nconst animateDeriving = function (lab, steps, currentStep) {\n    if (_running.get(lab) && currentStep < steps) {\n        setTimeout(() => {\n            lab.interpretation.render(lab.derive());\n            animateDeriving(lab, steps, currentStep + 1);\n        }, _speed.get(lab));\n    } else {\n        _running.set(lab, false);\n    }\n};\n\nconst setupAnimation = function (lab, animate = false) {\n    if (Number.isInteger(animate)) {\n        if (0 < animate) {\n            _animate.set(lab, true);\n            _speed.set(lab, animate);\n        } else {\n            _animate.set(lab, false);\n            _speed.set(lab, undefined);\n        }\n    } else if (animate && true === animate) {\n        _animate.set(lab, true);\n        _speed.set(lab, SPEED);\n    } else {\n        _animate.set(lab, false);\n        _speed.set(lab, undefined);\n    }\n};\n\n/**\n * Lab is the public API to interact with an lsystem and its interpretation.\n * Use this class to build an application on top of.\n *\n * Each Lab has a valid LSystem and a corresponding Interpretation. \n *\n * @property {HTMLElement} element with the interpretation of the lsystem\n * @property {Interpretation} interpretation of the lsystem\n * @property {LSystem} lsystem being interpreted\n * @property {Boolean|Number} animate - control the animation of the\n * Interpretation\n */\nclass Lab {\n    constructor(config = {}) {\n        _running.set(this, false);\n\n        createLSystem(this, config.lsystem || \"\");\n        createInterpretation(this, config.interpretation);\n\n        const animate = getProperty(config, \"interpretation.config.animate\", false);\n        setupAnimation(this, animate);\n\n        const derivationLength = getProperty(config, \"interpretation.config.derivationLength\", 0);\n        initializeAndRun(this, derivationLength);\n    }\n\n    get element() {\n        return _element.get(this);\n    }\n\n    get interpretation() {\n        return _interpretation.get(this);\n    }\n\n    set interpretation(config = {}) {\n        createInterpretation(this, config);\n    }\n\n    set lsystem(lsystem) {\n        createLSystem(this, lsystem);\n    }\n\n    get lsystem() {\n        return _lsystem.get(this);\n    }\n\n    get animate() {\n        return _animate.get(this);\n    }\n\n    set animate(animate) {\n        setupAnimation(this, animate);\n    }\n        \n    // actions\n    // control rendering\n\n    /** \n     * Run this Lab by deriving this Lab's lsystem's successor for steps\n     * times and interpret it.\n     *\n     * @param {Number} [steps = 0] - the number of derivations to perform.\n     */\n    run(steps = 0) {\n        if (this.animate) {\n            _running.set(this, true);\n            animateDeriving(this, steps, 0);\n        } else {\n            this.interpretation.render(this.derive(steps));\n        }\n    }\n\n    /**\n     * Stop running this Lab.\n     */\n    stop() {\n        _running.set(this, false);\n    }\n\n    /**\n     * Derive the next sequence from this Lab's LSystem.\n     *\n     * @param {Integer} [derivationLength = 1] - the number of derivations to\n     * perform, defaults to one step.\n     *\n     * @returns {ModuleTree} successor\n     */\n    derive(length = 1) {\n        return this.lsystem.derive(length);\n    }\n\n    /**\n     * Reset this lab to its initial state.\n     */\n    reset() {\n        this.interpretation.reset();\n        this.lsystem.reset(); \n    }\n}\n\nexport {\n    Lab,\n    getProperty\n};\n","/*\n * Copyright 2017 Huub de Beer <huub@heerdebeer.org>\n *\n * This file is part of virtual_botanical_laboratory.\n *\n * virtual_botanical_laboratory is free software: you can redistribute it\n * and/or modify it under the terms of the GNU General Public License as\n * published by the Free Software Foundation, either version 3 of the License,\n * or (at your option) any later version.\n *\n * virtual_botanical_laboratory is distributed in the hope that it will be\n * useful, but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General\n * Public License for more details.\n *\n * You should have received a copy of the GNU General Public License along\n * with virtual_botanical_laboratory.  If not, see\n * <http://www.gnu.org/licenses/>.\n * \n */\n/**\n * The CSS styling for the LabView\n */\nexport default `\n.lab-view {\n    font-size: 12pt;\n    font-family: Helvetica, Arial, sans-serif;\n}\n\n.lab-view .tabs {\n    position: relative;\n    min-height: 200px;\n    height: 600px;\n    clear: both;\n    margin: 1px;\n    padding: 0;\n    \n    background: #F5F5F5;\n    border: 1px solid dimgray;\n}\n\n.lab-view .tab {\n    list-style: none;\n    float: left;\n    height: 100%;\n}\n\n.lab-view .tab.right {\n    float: right;\n}\n\n.lab-view .tab > label {\n    padding: 0px 10px 4px 10px;\n    left: 1px;\n}\n\n.lab-view .tab > label:hover {\n    background: #E5E5E5;\n}\n\n.lab-view .tab > input[type=\"radio\"] {\n    display: none;\n}\n\n.lab-view .tab .contents {\n    position: absolute;\n    top: 26px;\n    left: 0;\n    background: white;\n    right: 0;\n    bottom: 0;\n    padding: 5px;\n    padding-bottom: 10px;\n    border-top: 1px solid dimgray;\n    overflow: auto;\n}\n\n.lab-view .tab > input[type=radio]:checked ~ label {\n    background: dimgray;\n    color: white;\n    border-bottom: 1px white;\n    z-index: 2;\n}\n\n.lab-view .tab > input[type=radio]:checked ~ label ~ .contents {\n    z-index: 1;\n}\n\n.lab-view .tab > .contents h1 {\n    font-size: 16pt;\n    margin-top: 10px;\n}\n\n.lab-view .tab > .contents h2 {\n    font-size: 14pt;\n}\n\n.lab-view .tab .actions {\n    margin: 0;\n    padding: 0;\n    position: sticky;\n    left: 0px;\n    top: 0px;\n}\n\n.lab-view .tab .actions li {\n    list-style: none;\n    float: left;\n}\n\n.lab-view .tab .actions button {\n    padding: 0px;\n    margin: 1px;\n    color: black;\n}\n\n.lab-view .tab .actions .spacer {\n    padding-left: 5px;\n    color: transparent;\n}\n\n.lab-view .tab .contents .messages p {\n    border: 1px solid dimgray;\n    padding: 1ex;\n    margin: 1ex;\n}\n\n.messages .error {\n    border-color: crimson;\n    background-color: lightsalmon;\n}\n\n.messages .info {\n    border-color: slateblue;\n    background-color: lavender;\n}\n\n.lab-view .lsystem {\n    width: 100%;\n    height: 90%;\n}\n\n.lab-view pre {\n    clear: left;\n    padding: 1ex;\n    overflow-x: auto;\n    background-color: #f9f9f9;\n}\n\n.lab-view [data-section=\"lsystem\"] .editor {\n    width: 100%;\n    height: 83%;\n    clear: left;\n    padding-top: 1ex;\n}\n\n.lab-view [data-section=\"lsystem\"] textarea {\n    width: 99%;\n    height: 100%;\n}\n\n.lab-view [data-section=\"interpretation\"] .property-editor {\n    clear: left;\n    padding-top: 1ex;\n}\n\n.lab-view .interpretation-contents {\n    overflow-y: auto;\n    height: 83%;\n    clear: left;\n}\n\n.lab-view .property-editor table {\n    border-collapse: collapse;\n}\n\n.lab-view .property-editor th {\n    text-align: left;\n}\n\n.lab-view .property-editor th, .lab-view .property-editor td {\n    padding: 0.5ex;\n}\n\n.lab-view .property-editor td.value {\n    width: 100%;\n}\n\n.lab-view .property-editor textarea {\n    width: 100%;\n}\n\n`;\n","/*\n * Copyright 2017 Huub de Beer <huub@heerdebeer.org>\n *\n * This file is part of virtual_botanical_laboratory.\n *\n * virtual_botanical_laboratory is free software: you can redistribute it\n * and/or modify it under the terms of the GNU General Public License as\n * published by the Free Software Foundation, either version 3 of the License,\n * or (at your option) any later version.\n *\n * virtual_botanical_laboratory is distributed in the hope that it will be\n * useful, but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General\n * Public License for more details.\n *\n * You should have received a copy of the GNU General Public License along\n * with virtual_botanical_laboratory.  If not, see\n * <http://www.gnu.org/licenses/>.\n * \n */\n/**\n * About template\n */\nexport default `\n<p>\n    virtual_botanical_laboratory  2017 Huub de Beer &lt;<a href=\"mailto:Huub@heerdebeer.org\">Huub@heerdebeer.org</a>&gt;.\n</p>\n<p>\n    See its <a href=\"https://heerdebeer.org/Software/virtual_botanical_laboratory/\">website</a> for more information and its <a href=\"https://github.com/htdebeer/virtual_botanical_laboratory\">repository</a> for its source code.\n</p>\n<p>\n virtual_botanical_laboratory is free software: you can redistribute it\n and/or modify it under the terms of the GNU General Public License as\n published by the Free Software Foundation, either version 3 of the License,\n or (at your option) any later version.\n</p>\n<p>\n virtual_botanical_laboratory is distributed in the hope that it will be\n useful, but WITHOUT ANY WARRANTY; without even the implied warranty of\n MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General\n Public License for more details.\n</p>\n<p>\n You should have received a copy of the GNU General Public License along\n with virtual_botanical_laboratory.  If not, see\n &lt;<a href=\"http://www.gnu.org/licenses/\">http://www.gnu.org/licenses/</a>&gt;.\n</p>\n`;\n","/*\n * Copyright 2017 Huub de Beer <huub@heerdebeer.org>\n *\n * This file is part of virtual_botanical_laboratory.\n *\n * virtual_botanical_laboratory is free software: you can redistribute it\n * and/or modify it under the terms of the GNU General Public License as\n * published by the Free Software Foundation, either version 3 of the License,\n * or (at your option) any later version.\n *\n * virtual_botanical_laboratory is distributed in the hope that it will be\n * useful, but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General\n * Public License for more details.\n *\n * You should have received a copy of the GNU General Public License along\n * with virtual_botanical_laboratory.  If not, see\n * <http://www.gnu.org/licenses/>.\n * \n */\n/**\n * The manual.\n */\nexport default `\n<p>\n<p>This is a short manual of how to use the <code>virtual_botanical_laboratory</code>. For more information see the <a href=\"https://heerdebeer.org/Software/virtual_botanical_laboratory/\">website</a>.</p>\n<h2 id=\"interface\">Interface</h2>\n<p>The <code>virtual_botanical_laboratory</code> has a very simple and bare-bones user interface. It has been added more as an afterthought than that it has been designed with user experience in mind. (Feel free to create a better interface, <code>virtual_botanical_laboratory</code> is free software after all.)</p>\n<p>The interface is meant to show the generated images while giving the user access to the underlying L-system and the configuration of the interpretation of that L-system.</p>\n<p>The user interface consists of five tab pages:</p>\n<ol type=\"1\">\n<li><p>On the <em>main</em> tab page, labeled with <strong></strong>, you can see the rendered L-system (see figure below). It also has some buttons to control the L-system and export the rendering.</p>\n<figure>\n<img src=\"https://heerdebeer.org/Software/virtual_botanical_laboratory/images/ui/main-tab.png\" alt=\"The main tab to view and control the L-system\" /><figcaption>The <em>main</em> tab to view and control the L-system</figcaption>\n</figure>\n<p>The following &quot;file&quot; actions are available:</p>\n<ul>\n<li><strong></strong> (New): create a new empty virtual botanical laboratory in a new window.</li>\n<li><strong> HTML</strong> (Export to HTML): export the virtual botanical laboratory to a HTML file. By default, this file is named after the L-system.</li>\n<li><strong> PNG</strong> (Export to PNG): export the rendered L-system to a PNG file. By default, this file is named after the L-system.</li>\n</ul>\n<p>The following &quot;control&quot; actions are available:</p>\n<ul>\n<li><strong></strong> (Run): derive new successors for the L-system until it has reached the derivation length set by property <code>derivationLength</code>. You can set that option on the <em>Interpretation</em> tab.</li>\n<li><strong></strong> (Pause): stop deriving new successor.</li>\n<li><strong>1</strong> (Step): derive the next successor for the L-system. Note. Due to the inefficiencies with respect to memory, this might crash your browser.</li>\n<li><strong></strong> (Reset): reset the L-system to the axiom.</li>\n</ul></li>\n<li><p>You can view and edit the L-system definition on the <em>L-system</em> tab (see figure below).</p>\n<figure>\n<img src=\"https://heerdebeer.org/Software/virtual_botanical_laboratory/images/ui/lsystem-tab.png\" alt=\"The L-system tab to view and change the L-system&#39;s definition\" /><figcaption>The <em>L-system</em> tab to view and change the L-system's definition</figcaption>\n</figure>\nWhen you change the L-system, press the <strong>Update</strong> button to have the changes take effect. This will parse the L-system's definition. If you make an error, a warning is displayed. If everything is okay, a temporary information message to that effect is shown. Switch back to the <em>main</em> tab to see the changes in action.</li>\n<li><p>You can view and change the configuration of the interpretation on the <em>Interpretation</em> tab (see figure below).</p>\n<figure>\n<img src=\"https://heerdebeer.org/Software/virtual_botanical_laboratory/images/ui/interpretation-tab.png\" alt=\"The Interpretation tab to view and change the L-system&#39;s interpretation\" /><figcaption>The <em>Interpretation</em> tab to view and change the L-system's interpretation</figcaption>\n</figure>\n<p>On this <em>Interpretation</em> tab, there are two sections:</p>\n<ol type=\"1\">\n<li><p><strong>Properties</strong>, which is an editable list of properties you can set, update, or remove. These properties include:</p>\n<ul>\n<li>the <em>width</em> and <em>height</em> of the canvas</li>\n<li>the start coordinates <em>x</em>, <em>y</em></li>\n<li>the start angle <em>alpha</em></li>\n<li>the distance to draw each <code>F</code> command, <em>d</em></li>\n<li>the rotation to apply each <code>+</code> and <code>-</code> command, <em>delta</em></li>\n<li>the <em>close</em> property to connect start and end points</li>\n<li>the <em>derivationLength</em> property to set the number or derivation steps to perform</li>\n<li>the <em>animate</em> property to indicate if each derivation step has to be shown or only the final result</li>\n<li>the <em>line-width</em></li>\n<li>the <em>line-color</em></li>\n</ul></li>\n<li><p><strong>Commands</strong>, which is a list of all commands defined in the L-system. You can edit their definitions. Note. the <code>this</code> refers to the <code>[Interpretation](https://heerdebeer.org/Software/virtual_botanical_laboratory/documentation/api/Interpretation.html)</code>.</p>\n<p>The commands <code>F</code>, <code>f</code>, <code>+</code>, and <code>-</code> are defined by default. If you want to change their behavior, you have to introduce a new symbol in the L-system and write its command's code. You can call the default implementation as follows:</p>\n<pre><code>this.getCommand(&quot;F&quot;).execute(this);</code></pre></li>\n</ol></li>\n<li>You can read a short manual on the <em>Help</em> tab (labeled <em>?</em>).</li>\n<li><p>You can read about the <code>virtual_botanical_laboratory</code> and its license on the <em>About</em> tab (labeled <em>i</em>).</p></li>\n</ol>\n<h2 id=\"l-system\">The L-system language</h2>\n<p>The language to define a L-system follows the language described in the (first chapter of the) book <em>The algorithmic beauty of plants</em> <span class=\"citation\" data-cites=\"Prusinkiewicz1990a\">(Prusinkiewicz and Lindenmayer 1990)</span>. There are some notable differences:</p>\n<ol type=\"1\">\n<li>Symbol names should be separated from each other. If you want to denote an <code>F</code> followed by another <code>F</code>, write <code>F F</code> rather than <code>FF</code>.</li>\n<li>Symbols can have names of any length larger than 0. So you can use symbol <code>Forward</code> instead of <code>F</code> if you so please.</li>\n<li>3D aspects of the language have not yet been implemented.</li>\n<li>Language features described outside of Chapter 1 of <span class=\"citation\" data-cites=\"Prusinkiewicz1990a\">Prusinkiewicz and Lindenmayer (1990)</span> have not yet been implemented.</li>\n</ol>\n<p>Next the features of the L-system definition language are briefly introduced. For a more thorough overview, please see the <span class=\"citation\" data-cites=\"Prusinkiewicz1990a\">(Chapter on reading Prusinkiewicz and Lindenmayer 1990)</span>(#reading).</p>\n<h3 id=\"basic-l-system-definitions\">Basic L-system definitions</h3>\n<p>A basic L-system is defined by three parts:</p>\n<ol type=\"1\">\n<li>An <strong>alphabet</strong> with symbols, such as <code>F</code>, <code>-</code>, and <code>+</code>.</li>\n<li>The <strong>axiom</strong> or the initial string of symbols, such as <code>F F</code>.</li>\n<li>A list of rewriting rules called <strong>productions</strong>, such as <code>F -&gt; - F + F</code>.</li>\n</ol>\n<p>You specify the above L-system as follows:</p>\n<pre class=\"lsystem\"><code>my_first_lsystem = lsystem(\n    alphabet: {F, -, +},\n    axiom: F F,\n    productions: {\n        F -&gt; - F + F,\n        - -&gt; -,\n        + -&gt; +\n    }\n)</code></pre>\n<p>Identity rewriting rules like <code>+ -&gt; +</code> can be omitted. If there is no rewriting rule specified for a symbol in the language, the identity rewriting rule is used by default.</p>\n<p>For documenting purposes, you can also add a <strong>description</strong> to the L-system definition. So, the above example can be rewritten as:</p>\n<pre class=\"lsystem\"><code>my_first_lsystem = lsystem(\n    description: &quot;This is my first L-system definition!&quot;,\n    alphabet: {F, -, +},\n    axiom: F F,\n    productions: {\n        F -&gt; - F + F\n    }\n)</code></pre>\n<p>One of the interesting features of L-systems are branching structures. To define a sub structure, place it in between <code>[</code> and <code>]</code>. For example:</p>\n<pre class=\"lsystem\"><code>expanding_tree_circle = lsystem(\n    alphabet: {F, -, +},\n    axiom: F,\n    productions: {\n        F -&gt; F [ + F] - F\n    }\n)</code></pre>\n<p>This will generate some expanding circle of branching lines.</p>\n<h3 id=\"extensions-to-the-l-system-definition-language\">Extensions to the L-system definition language</h3>\n<ul>\n<li><p>Stochastic L-systems. To bring some randomness into your generated plants, you can configure different successor patterns for one symbol and indicate the likelyhood these successor patterns are chosen by prepending each successor pattern with a numerical probability. The sum of these probabilities <strong>must</strong> be one (1).</p>\n<p>For example, in the previous example you can choose circling left over right more often as follows:</p>\n<pre class=\"lsystem\"><code>expanding_random_tree_circle = lsystem(\n    alphabet: {F, -, +},\n    axiom: F,\n    productions: {\n        F: {\n            0.4 -&gt; F [ + F] - F,\n            0.6 -&gt; F [ - F] + F\n        }\n    }\n)\n</code></pre></li>\n<li><p>Context-aware L-system. You can choose a different successor pattern depending on the context wherein a symbol appears. For example, a <code>F</code> after a <code>+</code> can be replaced by a <code>f + F</code>, and a <code>F</code> after a <code>-</code> can be replaced by a <code>F - f</code>. You can indicate which symbols should be ignored when checking the context using the <strong>ignore</strong> keyword. For example:</p>\n<pre class=\"lsystem\"><code>expanding_random_tree_circle = lsystem(\n    alphabet: {F, f, -, +},\n    axiom: f,\n    productions: {\n        - &lt; F -&gt; F - f,\n        + &lt; F -&gt; f + F.\n        f -&gt; f [ - F] f [+ f]\n    },\n    ignore: {f}\n)\n</code></pre>\n<p>The <em>left context</em> is indicated by the string before the <code>&lt;</code> operator. You can indicate the <em>right context</em> by a string after the <code>&gt;</code> operator (not shown in the example).</p></li>\n<li><p>Parameterized symbols. To move information through a derivation, you can user parameterized symbols. For example:</p>\n<pre class=\"lsystem\"><code>dx = 10;\nddx = 0.5;\n\nexpanding_random_tree_circle = lsystem(\n    alphabet: {F&#39;(x), -, +},\n    axiom: F&#39;(100),\n    productions: {\n        F&#39;(x): x &gt; 100 -&gt; F + [ F&#39;(x - dx) - F&#39;(x / ddx)],\n        F&#39;(x): x &lt; 100 -&gt; F - [ F&#39;(x + dx) - F&#39;(x * ddx)]\n    }\n)\n</code></pre>\n<p>Here the <code>F'</code> symbol has parameter <code>x</code>. The successor to <code>F'(x)</code> differs depending on the value of <code>x</code>. These rewriting rules are <em>conditional</em>. You can define symbols with one or more parameters. Conditions can be complex by using Boolean operators <code>and</code>, <code>or</code>, and <code>not</code>.</p>\n<p>Also note the definition of global values <code>dx</code> and <code>ddx</code>.</p>\n<p>The power of parameterization is realized best by making using the parameter in the interpretation to change the behavior of the commands. For example, we can define the <code>F'</code> command as follows:</p>\n<pre><code>this.d = this.d + x;\nthis.getCommand(&quot;F&quot;).execute(this);</code></pre></li>\n</ul>\n<h2 id=\"references\" class=\"unnumbered\">References</h2>\n<div id=\"refs\" class=\"references\">\n<div id=\"ref-Prusinkiewicz1990a\">\n<p>Prusinkiewicz, Prezemyslaw, and Aristid Lindenmayer. 1990. <em>The Algorithmic Beauty of Plants</em>. New York: Springer-Verlag. <a href=\"http://algorithmicbotany.org/papers/#abop\" class=\"uri\">http://algorithmicbotany.org/papers/#abop</a>.</p>\n</div>\n</div>\n</p>\n`;\n","/*\n * Copyright 2017 Huub de Beer <huub@heerdebeer.org>\n *\n * This file is part of virtual_botanical_laboratory.\n *\n * virtual_botanical_laboratory is free software: you can redistribute it\n * and/or modify it under the terms of the GNU General Public License as\n * published by the Free Software Foundation, either version 3 of the License,\n * or (at your option) any later version.\n *\n * virtual_botanical_laboratory is distributed in the hope that it will be\n * useful, but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General\n * Public License for more details.\n *\n * You should have received a copy of the GNU General Public License along\n * with virtual_botanical_laboratory.  If not, see\n * <http://www.gnu.org/licenses/>.\n * \n */\nexport default `\n    <head>\n        <meta charset=\"utf-8\">\n        <title>Virtual Botanical Laboratory__NAME__</title>\n        <script src=\"__SOURCE_URL__\"></script>\n        <style>\n            figcaption {\n                font-style: italic;\n            }\n\n            figcaption .generator {\n                font-size: smaller;\n            }\n        </style>\n    <body>\n        <figure>\n            <figcaption>\n                __DESCRIPTION__<br>\n                <span class=\"generator\">Generated by <a href=\"_https://github.com/htdebeer/virtual_botanical_laboratory\">virtual_botanical_laboratory</a></span>\n            </figcaption>\n        </figure>\n        <script>\n            new virtual_botanical_laboratory.LabView(document.querySelector(\"figure\"), __CONFIGURATION__);\n        </script>`;\n","/*\n * Copyright 2017 Huub de Beer <huub@heerdebeer.org>\n *\n * This file is part of virtual_botanical_laboratory.\n *\n * virtual_botanical_laboratory is free software: you can redistribute it\n * and/or modify it under the terms of the GNU General Public License as\n * published by the Free Software Foundation, either version 3 of the License,\n * or (at your option) any later version.\n *\n * virtual_botanical_laboratory is distributed in the hope that it will be\n * useful, but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General\n * Public License for more details.\n *\n * You should have received a copy of the GNU General Public License along\n * with virtual_botanical_laboratory.  If not, see\n * <http://www.gnu.org/licenses/>.\n * \n */\nexport default `{\n    \"lsystem\": \"new_lab = lsystem(description: \\\\\\\"New lab, see '?' for help.\\\\\\\", alphabet: {F}, axiom: F, productions: {F -> F F})\",\n    \"interpretation\": {\n        \"config\": {\n            \"derivationLength\": 1,\n            \"y\": 50\n        }\n    }\n}`;\n","/*\n * Copyright 2017 Huub de Beer <huub@heerdebeer.org>\n *\n * This file is part of virtual_botanical_laboratory.\n *\n * virtual_botanical_laboratory is free software: you can redistribute it\n * and/or modify it under the terms of the GNU General Public License as\n * published by the Free Software Foundation, either version 3 of the License,\n * or (at your option) any later version.\n *\n * virtual_botanical_laboratory is distributed in the hope that it will be\n * useful, but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General\n * Public License for more details.\n *\n * You should have received a copy of the GNU General Public License along\n * with virtual_botanical_laboratory.  If not, see\n * <http://www.gnu.org/licenses/>.\n * \n */\nconst _name = new WeakMap();\nconst _icon = new WeakMap();\nconst _tooltip = new WeakMap();\nconst _callback = new WeakMap();\nconst _enabled = new WeakMap();\n\nconst _element = new WeakMap();\n\n/**\n * Action\n *\n * @property {String} name - this Action's name\n * @property {String} icon - this Action's icon, which is just a unicode\n * character\n * @property {String} tooltip - this Action's tooltip\n * @property {Boolean} enabled - is this Action enabled?\n * @property {HTMLElement} element - the HTML element related to this Action.\n */\nclass Action {\n\n    /**\n     * Create a new Action\n     *\n     * @param {String} name\n     * @param {String} icon\n     * @param {String} tooltip\n     * @param {Function} callback that is executed when this Action is run\n     * @param {Boolean} [enabled = true]\n     */\n    constructor(name, icon, tooltip, callback, enabled = true) {\n        _name.set(this, name);\n        _icon.set(this, icon);\n        _tooltip.set(this, tooltip);\n        _callback.set(this, callback);\n        _enabled.set(this, enabled);\n    }\n\n    get name() {\n        return _name.get(this);\n    }\n\n    get icon() {\n        return _icon.get(this);\n    }\n\n    get tooltip() {\n        return _tooltip.get(this);\n    }\n\n    /**\n     * Is this action enabled?\n     *\n     * @returns {Boolean} True if this action is enabled, false otherwise\n     */\n    isEnabled() {\n        return true === _enabled.get(this);\n    }\n\n    /**\n     * Enable this action.\n     */\n    enable() {\n        _enabled.set(this, true);\n    }\n\n    /**\n     * Disable this action\n     */\n    disable() {\n        _enabled.set(this, false);\n    }\n\n    /**\n     * Execute this action.\n     */\n    execute() {\n        _callback.get(this).call(null);\n    }\n\n    set element(elt) {\n        _element.set(this, elt);\n    }\n\n    get element() {\n        return _element.get(this);\n    }\n\n}\n\nexport {\n    Action\n};\n","/*\n * Copyright 2017 Huub de Beer <huub@heerdebeer.org>\n *\n * This file is part of virtual_botanical_laboratory.\n *\n * virtual_botanical_laboratory is free software: you can redistribute it\n * and/or modify it under the terms of the GNU General Public License as\n * published by the Free Software Foundation, either version 3 of the License,\n * or (at your option) any later version.\n *\n * virtual_botanical_laboratory is distributed in the hope that it will be\n * useful, but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General\n * Public License for more details.\n *\n * You should have received a copy of the GNU General Public License along\n * with virtual_botanical_laboratory.  If not, see\n * <http://www.gnu.org/licenses/>.\n * \n */\nimport {Action} from \"./Action.js\";\n\n/**\n * A Spacer is an empty action, just a shortcut to separate groups of actions.\n */\nclass Spacer extends Action {\n    /**\n     * Create a new Spacer\n     */\n    constructor() {\n        super(\"\", \"|\", \"\", () => false, false);\n    }\n}\n\nexport {\n    Spacer\n};\n","/*\n * Copyright 2017 Huub de Beer <huub@heerdebeer.org>\n *\n * This file is part of virtual_botanical_laboratory.\n *\n * virtual_botanical_laboratory is free software: you can redistribute it\n * and/or modify it under the terms of the GNU General Public License as\n * published by the Free Software Foundation, either version 3 of the License,\n * or (at your option) any later version.\n *\n * virtual_botanical_laboratory is distributed in the hope that it will be\n * useful, but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General\n * Public License for more details.\n *\n * You should have received a copy of the GNU General Public License along\n * with virtual_botanical_laboratory.  If not, see\n * <http://www.gnu.org/licenses/>.\n * \n */\nimport {Spacer} from \"./Spacer.js\";\n\nconst _config = new WeakMap();\nconst _element = new WeakMap();\n\nconst _actions = new WeakMap();\nconst _actionBar = new WeakMap();\n\nconst createAction = function (view, action) {\n    const element = document.createElement(\"li\");\n\n    if (action instanceof Spacer) {\n        element.classList.add(\"spacer\");\n        element.innerHTML = action.icon;\n    } else {\n        const button = document.createElement(\"button\");\n        button.dataset.action = action.name;\n        button.setAttribute(\"type\", \"button\");\n        button.setAttribute(\"title\", action.tooltip);\n        button.innerHTML = action.icon;\n\n        if (!action.isEnabled()) {\n            button.setAttribute(\"disabled\", \"disabled\");\n        }\n\n        button.addEventListener(\"click\", () => action.execute());\n\n        element.appendChild(button);\n    }\n    \n    _actionBar.get(view).appendChild(element);\n    action.element = element;\n    _actions.get(view).push(action);\n};\n\nconst createView = function (view, name, header, parentElt) {\n    const contents = document.createElement(\"div\");\n    contents.classList.add(\"contents\");\n    contents.dataset.name = name;\n    parentElt.appendChild(contents);\n\n    if (header) {\n        const headerElt = document.createElement(\"h1\");\n        headerElt.innerHTML = header;\n        contents.appendChild(headerElt);\n    }\n    \n    const messagePane = document.createElement(\"div\");\n    messagePane.classList.add(\"messages\");\n    messagePane.style.display = \"none\";\n    contents.appendChild(messagePane);\n\n    const actionBar = document.createElement(\"ul\");\n    actionBar.classList.add(\"actions\");\n    contents.appendChild(actionBar);\n    _actionBar.set(view, actionBar);\n\n    _element.set(view, contents);\n};\n\n/**\n * View represents a tab in the LabView.\n *\n * @property {HTMLElement} element\n */\nclass View {\n\n    /**\n     * Create a new View\n     *\n     * @param {HTMLElement} parentElt\n     * @param {String} name\n     * @param {Object} [config = {}]\n     */\n    constructor(parentElt, name, config = {}) {\n        _actions.set(this, []);\n        createView(this, name, config.header, parentElt);\n        this.configure(config);\n    }\n\n    get element() {\n        return _element.get(this);\n    }\n\n    /**\n     * Show a message on top of this View\n     *\n     * @param {String} message to show\n     * @param {String} [type = \"info\"] - the type of message. One of \"info\"\n     * (default), \"error\", or \"warning\"\n     * @param {Number} [timeout = false] - the time after which the message\n     * should disappear.\n     */\n    showMessage(message, type = \"info\", timeout = false) {\n        const messagePane = this.element.querySelector(\"div.messages\");\n        if (null !== messagePane) {\n            messagePane.innerHTML = `<p class=\"${type}\">${message}</p>`;\n            messagePane.style.display = \"block\";\n            if (Number.isInteger(timeout)) {\n                setTimeout(() => this.hideMessage(), parseInt(timeout));\n            }\n        }\n    }\n\n    /**\n     * Hide all messages on this View.\n     */\n    hideMessage() {\n        const messagePane = this.element.querySelector(\"div.messages\");\n        if (null !== messagePane) {\n            messagePane.style.display = \"none\";\n        }\n    }\n\n    /**\n     * Get action by name\n     * \n     * @param {String} name - the name of the action to get.\n     * @return {Action} the action or undefined if it cannot be found\n     */\n    action(name) {\n        const foundActions = _actions.get(this).filter((a) => a.name === name);\n        if (0 < foundActions.length) {\n            return foundActions[0];\n        } else {\n            return undefined;\n        }\n    }\n\n    /**\n     * Add an action to this View\n     *\n     * @param {Action} action\n     */\n    addAction(action) {\n        createAction(this, action);\n    }\n\n    /**\n     * Remove an action from this View\n     *\n     * @param {String} name\n     */\n    removeAction(name) {\n        const action = this.action(name);\n        if (undefined !== action) {\n            _actionBar.get(this).removeChild(action.element);\n            const actionIndex = _actions.get(this).indexOf(action);\n            _actions.get(this).splice(actionIndex, 1);\n        }\n    }\n\n    /**\n     * Configure this View\n     *\n     * @param {Object} [config = {}]\n     */\n    configure(config = {}) {\n        _config.set(this, config);\n    }\n}\n\nexport {\n    View\n};\n","/*\n * Copyright 2017 Huub de Beer <huub@heerdebeer.org>\n *\n * This file is part of virtual_botanical_laboratory.\n *\n * virtual_botanical_laboratory is free software: you can redistribute it\n * and/or modify it under the terms of the GNU General Public License as\n * published by the Free Software Foundation, either version 3 of the License,\n * or (at your option) any later version.\n *\n * virtual_botanical_laboratory is distributed in the hope that it will be\n * useful, but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General\n * Public License for more details.\n *\n * You should have received a copy of the GNU General Public License along\n * with virtual_botanical_laboratory.  If not, see\n * <http://www.gnu.org/licenses/>.\n * \n */\nimport {View} from \"./View.js\";\n\nconst _canvas = new WeakMap();\n\n/**\n * View represents a tab in the LabView.\n *\n * @property {HTMLCanvasElement} canvas\n */\nclass RenderView extends View {\n\n    /**\n     * Create a new RenderView.\n     *\n     * @param {HTMLCanvasElement} elt\n     * @param {Object} [config = {}]\n     */\n    constructor(elt, config = {}) {\n        super(elt, \"render\", config);\n    }\n\n    get canvas() {\n        return _canvas.get(this);\n    }\n\n    set canvas(canvasElement) {\n        if (this.element.contains(this.canvas)) {\n            this.element.removeChild(this.canvas);\n        }\n        _canvas.set(this, canvasElement);\n        this.element.appendChild(this.canvas);\n    }\n\n}\n\nexport {\n    RenderView\n};\n\n","/*\n * Copyright 2017 Huub de Beer <huub@heerdebeer.org>\n *\n * This file is part of virtual_botanical_laboratory.\n *\n * virtual_botanical_laboratory is free software: you can redistribute it\n * and/or modify it under the terms of the GNU General Public License as\n * published by the Free Software Foundation, either version 3 of the License,\n * or (at your option) any later version.\n *\n * virtual_botanical_laboratory is distributed in the hope that it will be\n * useful, but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General\n * Public License for more details.\n *\n * You should have received a copy of the GNU General Public License along\n * with virtual_botanical_laboratory.  If not, see\n * <http://www.gnu.org/licenses/>.\n * \n */\nimport {View} from \"./View.js\";\n\nconst _contents = new WeakMap();\n\n/**\n * DocumentView represents a tab with textual contents only.\n *\n * @property {String} contents, a HTML String detailing the contents of this\n * DocumentView.\n */\nclass DocumentView extends View {\n\n    /**\n     * Create a new DocumentView.\n     *\n     * @param {HTMLElement} elt\n     * @param {String} name\n     * @param {Object} config. If config contains a String property\n     * 'contents', that is used as this DocumentView's contents.\n     */\n    constructor(elt, name, config = {}) {\n        super(elt, name, config);\n        this.contents = config.contents || \"\";\n    }\n\n    get contents() {\n        return _contents.get(this);\n    }\n\n    set contents(str) {\n        let contentsEl = this.element.querySelector(\".document-contents\");\n        if (null === contentsEl) {\n            contentsEl = document.createElement(\"div\");\n            contentsEl.classList.add(\"document-contents\");\n            this.element.appendChild(contentsEl);\n        }\n        contentsEl.innerHTML = str;\n        _contents.set(this, str);\n    }\n\n}\n\nexport {\n    DocumentView\n};\n","/*\n * Copyright 2017 Huub de Beer <huub@heerdebeer.org>\n *\n * This file is part of virtual_botanical_laboratory.\n *\n * virtual_botanical_laboratory is free software: you can redistribute it\n * and/or modify it under the terms of the GNU General Public License as\n * published by the Free Software Foundation, either version 3 of the License,\n * or (at your option) any later version.\n *\n * virtual_botanical_laboratory is distributed in the hope that it will be\n * useful, but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General\n * Public License for more details.\n *\n * You should have received a copy of the GNU General Public License along\n * with virtual_botanical_laboratory.  If not, see\n * <http://www.gnu.org/licenses/>.\n * \n */\nimport {View} from \"./View.js\";\n\n\nconst TAB = 9;\nconst INDENT = \"  \";\nconst _originalLSystem = new WeakMap();\n\n/**\n * The LSystemView offers an editor to edit the LSystem definition.\n *\n * @property {String} originalLSystem - the initial LSystem definition\n * @property {String} lsystem -  the current LSystem definition\n */\nclass LSystemView extends View {\n\n    /**\n     * Create a new LSystemView\n     *\n     * @param {HTMLElement} element\n     * @param {LSystem} lsystem\n     * @param {Object} [config = {}]\n     */\n    constructor(elt, lsystem, config = {}) {\n        super(elt, \"lsystem\", config);\n        _originalLSystem.set(this, lsystem);\n        this.lsystem = lsystem;\n    }\n\n    get originalLSystem() {\n        return _originalLSystem.get(this);\n    }\n\n    set originalLSystem(lsystem) {\n        _originalLSystem.set(this, lsystem);\n    }\n\n    get lsystem() {\n        let textarea = this.element.querySelector(\"textarea\");\n        if (null === textarea) {\n            return \"\";\n        } else {\n            return textarea.value;\n        }\n    }\n\n    set lsystem(str) {\n        let textarea = this.element.querySelector(\"textarea\");\n\n        if (null === textarea) {\n            const editorElement = document.createElement(\"div\");\n            editorElement.classList.add(\"editor\");\n            textarea = document.createElement(\"textarea\");\n\n            // allow for tab key\n            textarea.addEventListener(\"keydown\", (event) => {\n                if (TAB === event.which) {\n                    const start = textarea.selectionStart;\n                    const end = textarea.selectionEnd;\n                    textarea.value = \n                        `${textarea.value.substr(0, start)}${INDENT}${textarea.value.substr(end)}`;\n                    textarea.selectionStart = textarea.selectionEnd = start + INDENT.length;\n                    event.preventDefault();\n                    return false;\n                }\n            });\n\n            editorElement.appendChild(textarea);\n            this.element.appendChild(editorElement);\n        }\n\n        textarea.value = str;\n    }\n}\n\nexport {\n    LSystemView\n};\n\n","/*\n * Copyright 2017 Huub de Beer <huub@heerdebeer.org>\n *\n * This file is part of virtual_botanical_laboratory.\n *\n * virtual_botanical_laboratory is free software: you can redistribute it\n * and/or modify it under the terms of the GNU General Public License as\n * published by the Free Software Foundation, either version 3 of the License,\n * or (at your option) any later version.\n *\n * virtual_botanical_laboratory is distributed in the hope that it will be\n * useful, but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General\n * Public License for more details.\n *\n * You should have received a copy of the GNU General Public License along\n * with virtual_botanical_laboratory.  If not, see\n * <http://www.gnu.org/licenses/>.\n * \n */\nconst ROWS = 10;\n\nconst _element = new WeakMap();\nconst _propertySpecifications = new WeakMap();\nconst _properties = new WeakMap();\nconst _propertyElements = new WeakMap();\n\nconst _editable = new WeakMap();\n\nconst _addSelect = new WeakMap();\nconst _propertyTable = new WeakMap();\n\nconst restOfProperties = function (editor) {\n    return editor\n        .propertySpecifications\n        .filter(p => {\n            return !editor.hasProperty(p.name);\n        })\n    ;\n};\n\nconst createTableHead = function (keyLabel = \"key\", valueLabel = \"value\") {\n    const tableHead = document.createElement(\"thead\");\n    \n    const headRow = document.createElement(\"tr\");\n\n    const keyHeadCell = document.createElement(\"th\");\n    keyHeadCell.textContent = keyLabel;\n    \n    const valueHeadCell = document.createElement(\"th\");\n    valueHeadCell.textContent = valueLabel;\n    \n    headRow.appendChild(keyHeadCell);\n    headRow.appendChild(valueHeadCell);\n    headRow.appendChild(document.createElement(\"th\"));\n    \n    tableHead.appendChild(headRow);\n\n    return tableHead;\n};\n\nconst createOption = function (name) {\n    const option = document.createElement(\"option\");\n    option.value = name;\n    option.textContent = name;\n    return option;\n};\n\nconst createRow = function (editor, propertyName) {\n    const propertySpecification = editor.getPropertySpecification(propertyName);\n    let propertyValue = editor.getProperty(propertyName);\n       \n    if (undefined === propertyValue) {\n        propertyValue = propertySpecification.default;\n    }\n       \n    if (undefined === propertyValue) {\n        propertyValue = \"\";\n    }\n\n    editor.setProperty(propertyName, propertyValue);\n\n    const row = document.createElement(\"tr\");\n    const keyCell = document.createElement(\"th\");\n    keyCell.textContent = propertyName;\n    row.appendChild(keyCell);\n\n    const valueCell = document.createElement(\"td\");\n    valueCell.classList.add(\"value\");\n    let valueEditor;\n    if (\"textarea\" === propertySpecification.type) {\n        valueEditor = document.createElement(\"textarea\");\n        valueEditor.setAttribute(\"rows\", ROWS);\n    } else {\n        valueEditor = document.createElement(\"input\");\n        valueEditor.setAttribute(\"type\", propertySpecification.type);\n\n        if (\"number\" === propertySpecification.type) {\n            valueEditor.setAttribute(\"step\", \"any\");\n        }\n    }\n    valueEditor.value = propertyValue;\n    valueCell.appendChild(valueEditor);\n    _propertyElements.get(editor)[propertyName] = valueEditor;\n    row.appendChild(valueCell);\n\n    if (editor.editable) {\n        const deleteCell = document.createElement(\"td\");\n        const deleteButton = document.createElement(\"button\");\n        deleteButton.classList.add(\"action\");\n        deleteButton.classList.add(\"delete\");\n        deleteButton.setAttribute(\"type\", \"button\");\n        deleteButton.textContent = \"\";\n        deleteButton.addEventListener(\"click\", () => {\n            editor.deleteProperty(propertyName);\n            row.parentNode.removeChild(row);\n            _addSelect.get(editor).appendChild(createOption(propertyName));\n        });\n        deleteCell.appendChild(deleteButton);\n        row.appendChild(deleteCell);\n    } else {\n        row.appendChild(document.createElement(\"td\"));\n    }\n\n    return row;\n};\n\nconst createAddRow = function (editor, addLabel) {\n    const row = document.createElement(\"tr\");\n    const addCell = document.createElement(\"td\");\n    addCell.setAttribute(\"colspan\", 3);\n    const select = document.createElement(\"select\");\n    \n    const label = document.createElement(\"option\");\n    label.textContent = addLabel;\n    select.appendChild(label);\n\n    restOfProperties(editor).forEach((p) => select.appendChild(createOption(p.name)));\n\n    select.addEventListener(\"change\", () => {\n        if (1 <= select.selectedIndex) {\n            const selectedOption = select.options[select.selectedIndex];\n            const name = selectedOption.value;\n            _propertyTable.get(editor).insertBefore(createRow(editor, name), row); \n            select.removeChild(selectedOption);\n        }\n\n        select.selectedIndex = 0;\n    });\n\n    _addSelect.set(editor, select);\n\n    addCell.appendChild(select);\n\n    row.appendChild(addCell);\n    return row;\n};\n\nconst createTableBody = function (editor, config = {}) {\n    const tableBody = document.createElement(\"tbody\");\n    Object.keys(editor.properties).forEach(property => {\n        tableBody.appendChild(createRow(editor, property));\n    });\n\n    if (editor.editable) {\n        tableBody.appendChild(createAddRow(editor, config.addLabel || \"Add property\"));\n    }\n\n    _propertyTable.set(editor, tableBody);\n\n    return tableBody;\n};\n\nconst createPropertyEditor = function (editor, config) {\n    const editorElement = document.createElement(\"div\");\n    editorElement.classList.add(\"property-editor\");\n\n    if (undefined !== config.header) {\n        const header = document.createElement(\"h2\");\n        header.textContent = config.header;\n        editorElement.appendChild(header);\n    }\n\n    const table = document.createElement(\"table\");\n    table.appendChild(createTableHead(config.keyLabel, config.valueLabel));\n    table.appendChild(createTableBody(editor, config));\n    editorElement.appendChild(table);\n    \n    _element.set(editor, editorElement);\n};\n\n/**\n * A PropertyEditor is an editor for key-value pairs, for a finite set of\n * keys.\n *\n * @property {HTMLElement} element - this PropertyEditor's HTML element\n * @property {Boolean} editable - is this PropertyEditor editable\n * @property {Object} properties - the properties that are set\n * @property {Object} propertySpecifications - the specifications of all\n * properties to edit\n * @property {String[]} propertyValues - the values of the set properties\n *\n */\nclass PropertyEditor {\n    constructor(propertySpecifications, properties = {}, config = {}) {\n        _propertySpecifications.set(this, propertySpecifications);\n        _properties.set(this, properties);\n        _propertyElements.set(this, {});\n\n        _editable.set(this, undefined === config.editable ? true : (true === config.editable) );\n\n        createPropertyEditor(this, config);\n    }\n\n    get element() {\n        return _element.get(this);\n    }\n\n    get editable() {\n        return true === _editable.get(this);\n    }\n\n    get propertySpecifications() {\n        return _propertySpecifications.get(this);\n    }\n\n    get properties() {\n        return _properties.get(this);\n    }\n\n    get propertyValues() {\n        const props = {};\n        Object.keys(_properties.get(this)).forEach((name) => {\n            props[name] = _propertyElements.get(this)[name].value;\n        });\n        return props;\n    }\n\n    /**\n     * Has the property with name been configured?\n     *\n     * @param {String} name\n     * @returns {Boolean} True if there is a property with name.\n     */\n    hasProperty(name) {\n        return name in this.properties;\n    }\n\n    /**\n     * Get the property value with name\n     *\n     * @param {String} name\n     * @returns {String} the value of this property or undefined if it does\n     * not exist\n     */\n    getProperty(name) {\n        return _properties.get(this)[name];\n    }\n\n    /**\n     * Set a named property's value if that property is allowed to be set.\n     *\n     * @param {String} name\n     * @param {String} value\n     */\n    setProperty(name, value) {\n        if (this.isAllowedProperty(name)) {\n            this.properties[name] = value;\n            // update editor\n        } else {\n            console.error(`Setting property '${name}' is not allowed. Expected property to be one of {${this.propertySpecifications.map(p => p.name).join(\", \")}}.`);\n        }\n    }\n\n    /**\n     * Delete a property from this editor\n     *\n     * @param {String} name - the property to delete\n     */\n    deleteProperty(name) {\n        if (this.hasProperty(name)) {\n            delete this.properties[name];\n        }\n    }\n\n    /**\n     * Get the specification of a property\n     *\n     * @param {String} name\n     * @returns {Object} the property specification\n     */\n    getPropertySpecification(name) {\n        return this.propertySpecifications.find((p) => name === p.name);\n    }\n\n    /**\n     * Set the specification of a property\n     *\n     * @param {String} name\n     * @param {Object} specification\n     */\n    setPropertySpecification(name, specification) {\n        this.propertySpecifications[name] = specification;\n    }\n\n    /**\n     * Is setting a property allowed?\n     *\n     * @param {String} name\n     * @returns {Boolean} True if name has a specification.\n     */\n    isAllowedProperty(name) {\n        return undefined !== this.getPropertySpecification(name);\n    }\n\n}\n\nexport {\n    PropertyEditor\n};\n","/*\n * Copyright 2017 Huub de Beer <huub@heerdebeer.org>\n *\n * This file is part of virtual_botanical_laboratory.\n *\n * virtual_botanical_laboratory is free software: you can redistribute it\n * and/or modify it under the terms of the GNU General Public License as\n * published by the Free Software Foundation, either version 3 of the License,\n * or (at your option) any later version.\n *\n * virtual_botanical_laboratory is distributed in the hope that it will be\n * useful, but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General\n * Public License for more details.\n *\n * You should have received a copy of the GNU General Public License along\n * with virtual_botanical_laboratory.  If not, see\n * <http://www.gnu.org/licenses/>.\n * \n */\nimport {View} from \"./View.js\";\nimport {Command} from \"../interpretation/Command.js\";\nimport {PropertyEditor} from \"./PropertyEditor.js\";\n\nconst _propertyEditor = new WeakMap();\nconst _commandEditor = new WeakMap();\n\nconst createPropertyEditor = function(view, properties, definedProperties) {\n    const propertyEditor = new PropertyEditor(properties, definedProperties, {\n        header: \"Properties\",\n        keyLabel: \"Name\",\n        valueLabel: \"Value\",\n        addLabel: \"Add property\"\n    });\n\n    _propertyEditor.set(view, propertyEditor);\n    return propertyEditor;\n};\n\nconst createCommandPropertyEditor = function(view, commands, definedCommands) {\n    const commandEditor = new PropertyEditor(commands, definedCommands, {\n        header: \"Commands\",\n        keyLabel: \"Name\",\n        valueLabel: \"Definition\",\n        addLabel: \"Add command definition\",\n        editable: false\n    });\n\n    _commandEditor.set(view, commandEditor);\n    return commandEditor;\n};\n\n\n/**\n * The InterpretationView represents a form to inspect and configure the\n * properties of an Interpretation.\n *\n * @property {Object} properties - the properties of the interpretation to\n * configure\n * @property {Object} values - the values of the properties of the\n * interpretation to configure\n *\n */\nclass InterpretationView extends View {\n\n    /**\n     * Create a new InterpretationView\n     *\n     * @param {HTMLElement} elt\n     * @param {Interpretation} interpretation\n     * @param {Object} [interpretationConfig = {}]\n     * @param {Object} [config = {}]\n     */\n    constructor(elt, interpretation, interpretationConfig = {}, config = {}) {\n        super(elt, \"interpretation\", config);\n\n        const container = document.createElement(\"div\");\n        container.classList.add(\"interpretation-contents\");\n\n        const properties = interpretation.registeredProperties;\n\n        container.appendChild(createPropertyEditor(this, properties, interpretationConfig.config).element);\n        \n        const commands = Object.keys(interpretation.commands).map(command => {\n            return {\n                name: command,\n                type: \"textarea\",\n                default: \"\",\n                converter: (s) => s\n            };\n        });\n        \n        const definedCommands = {};\n\n        Object.keys(interpretation.commands).forEach(name => {\n            const command = interpretation.commands[name];\n            definedCommands[name] = command.toString();\n        });\n\n        if (undefined !== interpretationConfig.commands) {\n            Object.keys(interpretationConfig.commands).forEach(name => {\n                const command = new Command(interpretationConfig.commands[name]);\n                definedCommands[name] = command.toString();\n            });\n        }\n\n        container.appendChild(createCommandPropertyEditor(this, commands, definedCommands).element);\n        this.element.appendChild(container);\n    }\n\n    get properties() {\n        return _propertyEditor.get(this).propertyValues;\n    }\n\n    get commands() {\n        return _commandEditor.get(this).propertyValues;\n    }\n\n    updateCommands(interpretation) {\n        const commandEditor = _commandEditor.get(this);\n\n        const commands = Object.keys(interpretation.commands).map(command => {\n            return {\n                name: command,\n                type: \"textarea\",\n                default: \"\",\n                converter: (s) => s\n            };\n        });\n\n        const definedCommands = {};\n        \n        Object.keys(interpretation.commands).forEach(name => {\n            const command = interpretation.getCommand(name);\n            definedCommands[name] = undefined === command ? \"\" : command.toString();\n        });\n\n        commandEditor.element.parentNode.replaceChild(\n            createCommandPropertyEditor(this, commands, definedCommands).element,\n            commandEditor.element\n        );\n\n    }\n}\n\nexport {\n    InterpretationView\n};\n\n","/*\n * Copyright 2017 Huub de Beer <huub@heerdebeer.org>\n *\n * This file is part of virtual_botanical_laboratory.\n *\n * virtual_botanical_laboratory is free software: you can redistribute it\n * and/or modify it under the terms of the GNU General Public License as\n * published by the Free Software Foundation, either version 3 of the License,\n * or (at your option) any later version.\n *\n * virtual_botanical_laboratory is distributed in the hope that it will be\n * useful, but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General\n * Public License for more details.\n *\n * You should have received a copy of the GNU General Public License along\n * with virtual_botanical_laboratory.  If not, see\n * <http://www.gnu.org/licenses/>.\n * \n */\nimport {Lab, getProperty} from \"./Lab.js\";\nimport {LSystem} from \"./lsystem/LSystem.js\";\n\nimport STYLE from \"./view/style.js\";\nimport ABOUT from \"./view/about.js\";\nimport HELP from \"./view/help.js\";\n\nimport EXPORT_HTML_TEMPLATE from \"./export_html_template.js\";\nimport EMPTY_CONFIGURATION from \"./empty_configuration.js\";\n\nimport {RenderView} from \"./view/RenderView.js\";\nimport {DocumentView} from \"./view/DocumentView.js\";\nimport {LSystemView} from \"./view/LSystemView.js\";\nimport {InterpretationView} from \"./view/InterpretationView.js\";\n\nimport {Command} from \"./interpretation/Command.js\";\n\nimport {Action} from \"./view/Action.js\";\nimport {Spacer} from \"./view/Spacer.js\";\n\nconst _lab = new WeakMap();\nconst _config = new WeakMap();\n\nconst _tabs = new WeakMap();\n\nconst _paused = new WeakMap();\n\nconst saveAs = function (labView, extension, dataURI) {\n    const name = labView.name.replace(/[ \\t\\n\\r]+/g, \"_\");\n\n    const a = document.createElement(\"a\");\n    a.download = `${name}.${extension}`,\n    a.href = dataURI;\n    document.body.appendChild(a);\n    a.addEventListener(\"click\", () => document.body.removeChild(a));\n    a.click();\n};\n\nconst scriptURL = function () {\n    // Get the source code by URL; assuming the script is loaded\n    // by a path ending in 'virtual_botanical_laboratory.js'.\n    const scripts = Array.from(document.querySelectorAll(\"script\"));\n    const labScript = scripts.filter((s) => s.src.endsWith(\"virtual_botanical_laboratory.js\"));\n    return labScript[0].src;\n};\n\nconst tab = function (labview, name) {\n    const tabs = _tabs.get(labview);\n    if (undefined !== tabs && tabs.hasOwnProperty(name)) {\n        return tabs[name];\n    } else {\n        return undefined;\n    }\n};\n\nconst generateId = function () {\n    let randomId;\n    do {\n        randomId = Math.random().toString(16).slice(2);\n    } while (null !== document.getElementById(randomId));\n\n    return randomId;\n};\n\nconst createTab = function (labview, name, text, tooltip, checked = false, right = false) {\n    const tab = document.createElement(\"li\");\n    tab.classList.add(\"tab\");\n    if (right) {\n        tab.classList.add(\"right\");\n    }\n    tab.dataset.section = name;\n\n    const id = generateId();\n    const input = document.createElement(\"input\");\n    input.setAttribute(\"type\", \"radio\");\n    input.setAttribute(\"name\", \"tabs\");\n    input.setAttribute(\"id\", id);\n    if (checked) {\n        input.setAttribute(\"checked\", \"checked\");\n    }\n    tab.appendChild(input);\n\n    const label = document.createElement(\"label\");\n    label.setAttribute(\"for\", id);\n    label.setAttribute(\"title\", tooltip);\n    label.innerHTML = text;\n    tab.appendChild(label);\n\n    return tab;\n};\n\nconst updateLSystem = function (labview, lsystemTab) {\n    const lsystemString = lsystemTab.lsystem;\n    // If the lsystem has been changed, try to parse it and update lsystem\n    if (lsystemTab.originalLSystem !== lsystemString) {\n        try {\n            const lsystem = LSystem.parse(lsystemTab.lsystem);\n            labview.reset();\n            labview.lab.lsystem = lsystem;\n            lsystemTab.originalLSystem = lsystemString;\n\n            // Also update the Interpretation tab's commands\n            const interpretationTab = _tabs.get(labview)[\"interpretation\"];\n            const interpretation = labview.lab.interpretation;\n        \n            const availableCommands = {};\n            lsystem\n                .alphabet\n                .moduleDefinitions\n                .forEach((md) => {\n                    if (!interpretation.hasCommand(md.name)) {\n                        availableCommands[md.name] = undefined;\n                    }\n                });\n\n            const interpretationConfig = _config.get(labview)[\"interpretation\"];\n            // Commands can be (re)defined in a configuration of an Interpretation \n            if (\"commands\" in interpretationConfig) {\n                Object\n                    .entries(interpretationConfig[\"commands\"])\n                    .forEach((entry) => {\n                        const [name, func] = entry;\n                        availableCommands[name] = func;\n                    });\n            }\n\n            Object\n                .keys(availableCommands)\n                .forEach((name) => interpretation.setCommand(name, new Command(availableCommands[name])));\n\n            interpretationTab.updateCommands(interpretation);\n\n            lsystemTab.showMessage(\"LSystem parsed and updated successfully.\", \"info\", 2000);\n            _config.get(labview)[\"lsystem\"] = lsystemString;\n        } catch (e) {\n            lsystemTab.showMessage(`Error parsing LSystem: \"${e}\"`, \"error\");\n        }\n    }\n};\n\nconst updateInterpretation = function (labview, interpretationTab) {\n    const properties = interpretationTab.properties;\n    const commands = interpretationTab.commands;\n\n    const changed = true; // TODO determine if interpretation specification has changed\n\n    if (changed) {\n        // update interpretation\n        try {\n\n            const config = {};\n            Object.entries(properties).forEach(([key, value]) => {\n                const registeredProperty = labview.lab.interpretation.getRegisteredProperty(key);\n                const converter = registeredProperty[\"converter\"] || function (v) { return v.toString();};\n                config[key] = converter.call(null, value);\n            });\n\n            const interpretationConfig = {\n                \"config\": config,\n                \"commands\": {}\n            };\n\n            _config.get(labview)[\"interpretation\"] = interpretationConfig;\n\n            const lsystem = labview.lab.lsystem.stringify();\n\n            labview.reset();\n\n            labview.lab = new Lab({\n                \"lsystem\": lsystem,\n                \"interpretation\": interpretationConfig\n            });\n\n            Object.entries(commands).forEach(([key, func]) => {\n                if (undefined !== func && \"\" !== func) {\n                    const modules = labview.lab.lsystem.alphabet.moduleDefinitions;\n                    let parameters = [];\n                    if (undefined !== modules) {\n                        parameters = modules.find((md) => key === md.name);\n                        if (undefined !== parameters) {\n                            parameters = parameters.parameters;\n                        } else {\n                            parameters = [];\n                        }\n                    }\n\n                    const command = new Command(parameters, func);\n                    labview.lab.interpretation.setCommand(key, command);\n                }\n            });\n\n            //labview.lab = labview.lab;\n            interpretationTab.showMessage(\"Interpretation updated successfully\", \"info\", 2000);\n        } catch (e) {\n            console.log(e);\n            interpretationTab.showMessage(`Error updating interpretation: \"${e}\"`, \"error\");\n        }\n    }\n};\n\nconst setupTabs = function (labview, element, tabConfig) {\n    const tabsElement = document.createElement(\"ul\");\n    tabsElement.classList.add(\"tabs\");\n    element.appendChild(tabsElement);\n\n    const tabs = {};\n\n    // General \"render\" tab to view and control L-System\n    const renderTabElement = createTab(labview, \"render\", \"\", \"View interpreted L-system\", true);\n    tabsElement.appendChild(renderTabElement);\n    const renderTab = tabs[\"render\"] = new RenderView(renderTabElement, {});\n\n    renderTab.addAction(new Action(\"create\", \"\", \"Create a new L-system.\", () => labview.create()));\n    renderTab.addAction(new Action(\"exportToHtml\", \" HTML\", \"Save this L-system to a HTML file.\", () => labview.exportToHTML()));\n    renderTab.addAction(new Action(\"exportToPng\", \" PNG\", \"Export this L-system to a PNG file.\", () => labview.exportToPNG()));\n\n    renderTab.addAction(new Spacer());\n\n    renderTab.addAction(new Action(\"run\", \"\", \"Run this L-system.\", () => labview.run()));\n    renderTab.addAction(new Action(\"pause\", \"\", \"Pause this L-system.\", () => labview.pause()));\n    renderTab.addAction(new Action(\"step\", \"1\", \"Derive the next succesor of this L-system.\", () => labview.step()));\n    renderTab.addAction(new Action(\"reset\", \"\", \"Reset this L-system.\", () => labview.reset()));\n\n    // L-System tab to edit L-System definition\n    const lsystemTabElement = createTab(labview, \"lsystem\", \"L-system\", \"Edit L-system\");\n    tabsElement.appendChild(lsystemTabElement);\n    tabs[\"lsystem\"] = new LSystemView(lsystemTabElement, tabConfig.lsystem, {\n        header: \"L-system definition\"\n    });\n    tabs[\"lsystem\"].addAction(\n        new Action(\n            \"update\", \n            \"update\", \n            \"Update this L-system.\", \n            () => updateLSystem(labview, tabs[\"lsystem\"])\n        )\n    );\n    \n    // Interpretation tab to change properties in the interpretation\n    const interpretationTabElement = createTab(labview, \"interpretation\", \"Interpretation\", \"Edit interpretation\");\n    tabsElement.appendChild(interpretationTabElement);\n    tabs[\"interpretation\"] = new InterpretationView(interpretationTabElement, labview.lab.interpretation, tabConfig.interpretation, {\n        header: \"Configure interpretation\"\n    });\n    tabs[\"interpretation\"].addAction(\n        new Action(\n            \"update\", \n            \"update\", \n            \"Update this L-system.\", \n            () => updateInterpretation(labview, tabs[\"interpretation\"])\n        )\n    );\n    \n    // About tab with information about the virtual_botanical_lab\n    const aboutTabElement = createTab(labview, \"about\", \"i\", \"About\", false, true);\n    tabsElement.appendChild(aboutTabElement);\n    tabs[\"about\"] = new DocumentView(aboutTabElement, \"about\", {\n        header: \"About\",\n        contents: ABOUT\n    });\n    \n    // Help tab with a manual for the virtual_botanical_lab\n    const helpTabElement = createTab(labview, \"help\", \"?\", \"help\", false, true);\n    tabsElement.appendChild(helpTabElement);\n    tabs[\"help\"] = new DocumentView(helpTabElement, \"help\", {\n        header: \"Help\",\n        contents: HELP\n    });\n\n    _tabs.set(labview, tabs);\n};\n\nconst createLabView = function (labview, parentElementOrSelector, config) {\n    const style = document.createElement(\"style\");\n    style.textContent = STYLE;\n    document.head.appendChild(style);\n\n    const template = document.createElement(\"div\");\n    template.classList.add(\"lab-view\");\n\n    let elt;\n    if (parentElementOrSelector instanceof Node) {\n        elt = parentElementOrSelector;\n    } else {\n        elt = document.querySelector(parentElementOrSelector);\n    }\n\n    if (elt.firstChild) {\n        elt.insertBefore(template, elt.firstChild);\n    } else {\n        elt.append(template);\n    }\n\n    setupTabs(labview, template, config);\n\n    return elt;\n};\n\n/**\n * A user interface for a Lab.\n *\n * @property {Lab} lab\n */\nclass LabView {\n\n    /**\n     * Create a new LabView.\n     *\n     * @param {HTMLElement|String} parentElementOrSelector - the parent\n     * element, or a selector to the parent element, to which this LabView\n     * will be appended.\n     * @param {Object} [config = {}] - the initial configuration of this\n     * LabView.\n     */\n    constructor(parentElementOrSelector, config = {}) {\n        // TODO: It is probably a good idea to validate the config first, though.\n        _config.set(this, Object.create(null, {}));\n        Object.assign(_config.get(this), config);\n        _lab.set(this, new Lab(config));\n\n        createLabView(this, parentElementOrSelector, config);\n        \n        this.lab = this.lab;\n\n        _paused.set(this, false);\n    }\n\n    get name() {\n        let name = \"virtual_plant\";\n        if (this.lab && this.lab.lsystem && \"\" !== this.lab.lsystem.name) {\n            name = this.lab.lsystem.name;\n        }\n        return name;\n    }\n\n    get description() {\n        let description = \"Plant generated by the virtual botanical laboratory.\";\n        if (this.lab && this.lab.lsystem && \"\" !== this.lab.lsystem.description) {\n            description = this.lab.lsystem.description;\n        }\n        return description;\n    }\n\n    get configuration() {\n        return JSON.stringify({\n            \"name\": this.name,\n            \"description\": this.description,\n            \"lsystem\": _config.get(this)[\"lsystem\"],\n            \"interpretation\": _config.get(this)[\"interpretation\"]\n        }, null, 4);\n    }\n\n    get lab() {\n        return _lab.get(this);\n    }\n\n    set lab(newLab) {\n        _lab.set(this, newLab);\n        tab(this, \"render\").canvas = this.lab.element;\n    }\n\n    // Control the lab view\n\n    set(sectionName, key, value) {\n        let section = _config.get(this)[sectionName];\n        if (undefined === section) {\n            section = Object.create(null);\n            _config.get(this)[sectionName] = section;\n        }\n        section[key] = value;\n    }\n\n    get(sectionName, key) {\n        const section = _config.get(this)[sectionName];\n        return undefined === section ? section[key] : undefined;\n    }\n\n    // File and export actions\n\n    /**\n     * Create an empty Lab in a new window/tab.\n     */\n    create() {\n        const htmlCode = EXPORT_HTML_TEMPLATE\n            .replace(/__NAME__/, \"New_lab\")\n            .replace(/__SOURCE_URL__/, scriptURL())\n            .replace(/__DESCRIPTION__/, \"New Lab. See '?' for help.\")\n            .replace(/__CONFIGURATION__/, EMPTY_CONFIGURATION)\n        ;\n\n        const newLabWindow = window.open();\n        newLabWindow.document.write(htmlCode);\n        newLabWindow.document.close();\n    }\n\n    /**\n     * Export the current lsystem and its configuration to a stand-alone HTML\n     * file.\n     */\n    exportToHTML() {\n        if (undefined !== this.lab) {\n            const htmlCode = \"<!DOCTYPE html>\\n<html>\\n\" + \n                EXPORT_HTML_TEMPLATE\n                .replace(/__NAME__/, this.name)\n                .replace(/__SOURCE_URL__/, scriptURL())\n                .replace(/__DESCRIPTION__/, this.description)\n                .replace(/__CONFIGURATION__/, this.configuration)\n            ;\n\n            const data = new Blob([htmlCode], {type: \"text/html\"});\n            saveAs(this, \"html\", URL.createObjectURL(data));\n        }\n    }\n\n    /**\n     * Export the current interpretation to a PNG file.\n     */\n    exportToPNG() {\n        if (undefined !== this.lab) {\n            const dataURI = this.lab\n                .interpretation\n                .canvasElement\n                .toDataURL(\"image/png\")\n                .replace(/^data:image\\/[^;]/, \"data:application/octet-stream\");\n            \n            saveAs(this, \"png\", dataURI);\n        }\n    }\n\n    // Control a lab actions\n\n    run() {\n        if (undefined !== this.lab) {\n            const derivationLength = getProperty(_config.get(this), \"interpretation.config.derivationLength\", 0);\n\n            const steps = derivationLength - this.lab.lsystem.derivationLength;\n            this.lab.run(steps);\n\n            _paused.set(this, false);\n        }\n    }\n\n    step() {\n        if (undefined !== this.lab) {\n            this.lab.run(1);\n        }\n    }\n\n    pause() {\n        if (undefined !== this.lab) {\n            this.lab.stop();\n            _paused.set(this, true);\n        }\n    }\n\n    isPaused() {\n        return true === _paused.get(this);\n    }\n\n    reset() {\n        if (undefined !== this.lab) {\n            this.lab.reset();\n            _paused.set(this, false);\n        }\n    }\n\n}\n\nexport {\n    LabView\n};\n","/*\n * Copyright 2017 Huub de Beer <huub@heerdebeer.org>\n *\n * This file is part of virtual_botanical_laboratory.\n *\n * virtual_botanical_laboratory is free software: you can redistribute it\n * and/or modify it under the terms of the GNU General Public License as\n * published by the Free Software Foundation, either version 3 of the License,\n * or (at your option) any later version.\n *\n * virtual_botanical_laboratory is distributed in the hope that it will be\n * useful, but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General\n * Public License for more details.\n *\n * You should have received a copy of the GNU General Public License along\n * with virtual_botanical_laboratory.  If not, see\n * <http://www.gnu.org/licenses/>.\n * \n */\nimport {LexicalError} from \"./lsystem/LexicalError.js\";\nimport {ParseError} from \"./lsystem/ParseError.js\";\nimport {LSystem} from \"./lsystem/LSystem.js\";\nimport {Interpretation} from \"./interpretation/Interpretation.js\";\nimport {TurtleInterpretation} from \"./interpretation/TurtleInterpretation.js\";\nimport {CanvasTurtleInterpretation} from \"./interpretation/CanvasTurtleInterpretation.js\";\nimport {Lab} from \"./Lab.js\";\nimport {LabView} from \"./LabView.js\";\n\nwindow.virtual_botanical_laboratory = window.virtual_botanical_laboratory || {\n    LexicalError,\n    ParseError,\n    LSystem,\n    Interpretation,\n    TurtleInterpretation,\n    CanvasTurtleInterpretation,\n    Lab,\n    LabView\n};\n"],"names":["_name","_column","_line","_lexemeBegin","number","string","_element","_config","_canvas","createPropertyEditor"],"mappings":"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"}